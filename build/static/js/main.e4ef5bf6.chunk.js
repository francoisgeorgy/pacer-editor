(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{28:function(e,t,a){},29:function(e,t,a){},35:function(e,t,a){e.exports=a(92)},44:function(e,t,a){},46:function(e,t,a){},49:function(e,t,a){},51:function(e,t,a){},55:function(e,t,a){},57:function(e,t,a){},60:function(e,t,a){},62:function(e,t,a){},64:function(e,t,a){},66:function(e,t,a){},69:function(e,t,a){},72:function(e,t,a){},82:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){},90:function(e,t,a){},92:function(e,t,a){"use strict";a.r(t);var n=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function r(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var a=e.installing;a.onstatechange=function(){"installed"===a.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}a(36);var c=a(0),l=a.n(c),s=a(20),o=a.n(s),i=a(6),u=a(7),d=a(9),m=a(8),p=a(4),f=a(3),h=a(11),v=a.n(h),E=a(17),b=a(5),y=a(10),g=a.n(y);function O(e){var t=g.a.inputs.find(function(t){return t.id===e});return t||g.a.outputs.find(function(t){return t.id===e})}function j(e){return g.a.outputs.find(function(t){return t.id===e})}var N=a(1),C=function(e){return new Promise(function(t){return setTimeout(t,e)})};function w(e){return void 0!==e&&null!==e&&""!==e&&e>=0}var D,P,x,R,k,S,I,M,A,F,_={position:"absolute",top:0,right:0,bottom:0,left:0,paddingTop:"4rem",background:"rgba(0,0,0,0.4)",textAlign:"center",color:"#fff",fontSize:"4rem"},T=[0,1,119],B=[127],L=1,U=2,G=1,W=5,Z=(D={},Object(N.a)(D,G,"preset"),Object(N.a)(D,W,"global"),Object(N.a)(D,7,"full backup"),D),H=["switch 1","switch 2","switch 3","switch 4","switch 5","switch 6",null,"switch A","switch B","switch C","switch D","FS 1","FS 2","FS 3","FS 4","EXP 1","EXP 2"],V=["Current","Track","Transport","A1","A2","A3","A4","A5","A6","B1","B2","B3","B4","B5","B6","C1","C2","C3","C4","C5","C6","D1","D2","D3","D4","D5","D6"],Y=1,X=13,z=14,K=15,q=16,J=17,$=18,Q=20,ee=21,te=22,ae=23,ne=24,re=25,ce=26,le=27,se=54,oe=55,ie=126,ue=127,de=(P={},Object(N.a)(P,Y,"name"),Object(N.a)(P,X,"1"),Object(N.a)(P,z,"2"),Object(N.a)(P,K,"3"),Object(N.a)(P,q,"4"),Object(N.a)(P,J,"5"),Object(N.a)(P,$,"6"),Object(N.a)(P,19,"RESERVED"),Object(N.a)(P,Q,"A"),Object(N.a)(P,ee,"B"),Object(N.a)(P,te,"C"),Object(N.a)(P,ae,"D"),Object(N.a)(P,ne,"FS 1"),Object(N.a)(P,re,"FS 2"),Object(N.a)(P,ce,"FS 3"),Object(N.a)(P,le,"FS 4"),Object(N.a)(P,se,"EXP 1"),Object(N.a)(P,oe,"EXP 2"),Object(N.a)(P,ie,"MIDI configuration"),Object(N.a)(P,ue,"ALL"),P),me={1:"Preset Name",13:"Stompswitch 1",14:"Stompswitch 2",15:"Stompswitch 3",16:"Stompswitch 4",17:"Stompswitch 5",18:"Stompswitch 6",19:"RESERVED",20:"Stompswitch A",21:"Stompswitch B",22:"Stompswitch C",23:"Stompswitch D",24:"Footswitch 1",25:"Footswitch 2",26:"Footswitch 3",27:"Footswitch 4",54:"Expression Pedal 1",55:"Expression Pedal 2",126:"MIDI configuration",127:"ALL"},pe=([13,14,15,16,17,18,20,21,22,23].map(String),[20,21,22,23].map(String)),fe=[13,14,15,16,17,18].map(String),he=[24,25,26,27].map(String),ve=[54,55].map(String),Ee=97,be=(x={},Object(N.a)(x,0,"CC"),Object(N.a)(x,3,"NRPN C"),Object(N.a)(x,4,"NRPN F"),Object(N.a)(x,1,"PITCH"),Object(N.a)(x,2,"AT CHAN"),Object(N.a)(x,126,"DAW FUNC"),Object(N.a)(x,Ee,"CTRL_OFF"),Object(N.a)(x,71,"CC TOGGLE"),Object(N.a)(x,64,"CC"),Object(N.a)(x,72,"CC STEP"),Object(N.a)(x,67,"NOTE"),Object(N.a)(x,68,"NOTE TOGGLE"),Object(N.a)(x,69,"PRG BANK"),Object(N.a)(x,70,"PRG STEP"),Object(N.a)(x,87,"NRPN COARSE"),Object(N.a)(x,88,"NRPN FINE"),Object(N.a)(x,85,"MMC"),Object(N.a)(x,89,"RELAY"),Object(N.a)(x,98,"PRESET SELECT"),Object(N.a)(x,86,"PRESET INC DEC"),Object(N.a)(x,99,"STEP SELECT"),Object(N.a)(x,100,"STEP INC DEC"),Object(N.a)(x,18,"CC"),Object(N.a)(x,17,"CC REL"),Object(N.a)(x,21,"NRPN C"),Object(N.a)(x,22,"NRPN F"),Object(N.a)(x,19,"PITCH"),Object(N.a)(x,20,"AT CHAN"),Object(N.a)(x,16,"PRG"),Object(N.a)(x,23,"PRESET SEL"),Object(N.a)(x,24,"STEP SEL"),Object(N.a)(x,101,"CC"),x),ye=(R={},Object(N.a)(R,0,"CC"),Object(N.a)(R,3,"NRPN C"),Object(N.a)(R,4,"NRPN F"),Object(N.a)(R,1,"Pitch"),Object(N.a)(R,2,"AT CHAN"),Object(N.a)(R,126,"DAW"),Object(N.a)(R,Ee,"OFF"),Object(N.a)(R,71,"CC tggl"),Object(N.a)(R,64,"CC"),Object(N.a)(R,72,"CC step"),Object(N.a)(R,67,"Note"),Object(N.a)(R,68,"Note tggl"),Object(N.a)(R,69,"Prg bank"),Object(N.a)(R,70,"Prg step"),Object(N.a)(R,87,"NRPN C"),Object(N.a)(R,88,"NRPN F"),Object(N.a)(R,85,"MMC"),Object(N.a)(R,89,"Relay"),Object(N.a)(R,98,"Preset sel"),Object(N.a)(R,86,"Preset +/-"),Object(N.a)(R,99,"Step sel"),Object(N.a)(R,100,"Step +/-"),Object(N.a)(R,18,"CC"),Object(N.a)(R,17,"CC rel"),Object(N.a)(R,21,"NRPN C"),Object(N.a)(R,22,"NRPN F"),Object(N.a)(R,19,"Pitch"),Object(N.a)(R,20,"AT chan"),Object(N.a)(R,16,"Prg"),Object(N.a)(R,23,"Preset sel"),Object(N.a)(R,24,"Step sel"),Object(N.a)(R,101,"CC"),k={},Object(N.a)(k,Ee,"OFF"),Object(N.a)(k,0,"CC"),Object(N.a)(k,3,"NRPN Coarse"),Object(N.a)(k,4,"NRPN Fine"),Object(N.a)(k,1,"Pitch Bend"),Object(N.a)(k,2,"Channel AfterTouch"),Object(N.a)(k,126,"DAW Function"),Object(N.a)(k,71,"CC Toggle"),Object(N.a)(k,64,"CC Trigger"),Object(N.a)(k,72,"CC Step"),Object(N.a)(k,67,"Note"),Object(N.a)(k,68,"Note Toggle"),Object(N.a)(k,69,"Program & Bank"),Object(N.a)(k,70,"Program Step"),Object(N.a)(k,87,"NRPN Coarse"),Object(N.a)(k,88,"NRPN Fine"),Object(N.a)(k,85,"MIDI Machine Control"),Object(N.a)(k,89,"Relay Outputs"),Object(N.a)(k,98,"Preset Select"),Object(N.a)(k,86,"Preset Inc/Dec"),Object(N.a)(k,99,"Step Select"),Object(N.a)(k,100,"Step Inc/Dec"),Object(N.a)(k,18,"CC"),Object(N.a)(k,17,"CC REL"),Object(N.a)(k,21,"NRPN Coarse"),Object(N.a)(k,22,"NRPN Fine"),Object(N.a)(k,19,"Pitch Bend"),Object(N.a)(k,20,"AT Chan."),Object(N.a)(k,16,"Program"),Object(N.a)(k,23,"Preset Sel"),Object(N.a)(k,24,"Step Sel"),k),ge=function(e){var t=[];for(var a in e)e.hasOwnProperty(a)&&t.push({key:a,value:e[a]});return t.sort(function(e,t){return e.value.localeCompare(t.value)}),t}((S={},Object(N.a)(S,101,"Load CC"),Object(N.a)(S,67,"MIDI Note"),Object(N.a)(S,69,"Program & Bank"),Object(N.a)(S,87,"NRPN Coarse"),Object(N.a)(S,88,"NRPN Fine"),Object(N.a)(S,85,"MIDI Machine Control"),Object(N.a)(S,89,"Relay Outputs"),Object(N.a)(S,126,"DAW Func."),Object(N.a)(S,Ee,"OFF"),S)),Oe="not used",je=(I={},Object(N.a)(I,Ee,["","",""]),Object(N.a)(I,0,["Controller","Min","Max"]),Object(N.a)(I,3,["Max","NRPN LSB","NRPN MSB"]),Object(N.a)(I,4,["Max","NRPN LSB","NRPN MSB"]),Object(N.a)(I,1,[Oe,"Min","Max"]),Object(N.a)(I,2,[Oe,"Min","Max"]),Object(N.a)(I,126,["function",Oe,Oe]),Object(N.a)(I,71,["controller","value 1","value 2"]),Object(N.a)(I,64,["controller","down","up"]),Object(N.a)(I,72,["controller","start","end"]),Object(N.a)(I,67,["note","velocity",Oe]),Object(N.a)(I,68,["note","velocity",Oe]),Object(N.a)(I,69,["program","bank LSB","bank MSB"]),Object(N.a)(I,70,[Oe,"start","end"]),Object(N.a)(I,87,["value","NRPN LSB","NRPN MSB"]),Object(N.a)(I,88,["value","NRPN LSB","NRPN MSB"]),Object(N.a)(I,85,["device","command",Oe]),Object(N.a)(I,89,["mode","relay #",Oe]),Object(N.a)(I,98,["preset",Oe,Oe]),Object(N.a)(I,86,["inc/dec",Oe,Oe]),Object(N.a)(I,99,["target","step",Oe]),Object(N.a)(I,100,["target","inc/dec",Oe]),Object(N.a)(I,18,["","",""]),Object(N.a)(I,17,["","",""]),Object(N.a)(I,21,["","",""]),Object(N.a)(I,22,["","",""]),Object(N.a)(I,19,["","",""]),Object(N.a)(I,20,["","",""]),Object(N.a)(I,16,["","",""]),Object(N.a)(I,23,["","",""]),Object(N.a)(I,24,["","",""]),Object(N.a)(I,101,["controller","value",Oe]),I),Ne=(M={},Object(N.a)(M,0,[!0,!0,!0]),Object(N.a)(M,3,[!0,!0,!0]),Object(N.a)(M,4,[!0,!0,!0]),Object(N.a)(M,1,[!0,!0,!0]),Object(N.a)(M,2,[!0,!0,!0]),Object(N.a)(M,126,[!0,!1,!1]),Object(N.a)(M,Ee,[!0,!0,!0]),Object(N.a)(M,71,[!0,!0,!0]),Object(N.a)(M,64,[!0,!0,!0]),Object(N.a)(M,72,[!0,!0,!0]),Object(N.a)(M,67,[!0,!0,!1]),Object(N.a)(M,68,[!0,!0,!1]),Object(N.a)(M,69,[!0,!0,!0]),Object(N.a)(M,70,[!1,!0,!0]),Object(N.a)(M,87,[!0,!0,!0]),Object(N.a)(M,88,[!0,!0,!0]),Object(N.a)(M,85,[!0,!0,!1]),Object(N.a)(M,89,[!0,!0,!1]),Object(N.a)(M,98,[!0,!1,!1]),Object(N.a)(M,86,[!0,!1,!1]),Object(N.a)(M,99,[!0,!0,!1]),Object(N.a)(M,100,[!0,!0,!1]),Object(N.a)(M,18,[!0,!0,!0]),Object(N.a)(M,17,[!0,!0,!0]),Object(N.a)(M,21,[!0,!0,!0]),Object(N.a)(M,22,[!0,!0,!0]),Object(N.a)(M,19,[!0,!0,!0]),Object(N.a)(M,20,[!0,!0,!0]),Object(N.a)(M,16,[!0,!0,!0]),Object(N.a)(M,23,[!0,!0,!0]),Object(N.a)(M,24,[!0,!0,!0]),Object(N.a)(M,101,[!0,!0,!1]),M),Ce=[71,64,72,67,68,69,70,87,88,85,89,98,86,99,100,Ee],we=[71,64,72,67,68,69,70,87,88,85,89,98,86,99,100,Ee],De=[0,3,4,1,2,Ee],Pe=["Auto Detect","Normally Open","Normally Closed","Latching"],xe={0:"Off",1:"1A Pink",2:"1B Dim Pink",3:"2A Red",4:"2B Dim Red",5:"3A Orange",6:"3B Dim Orange",7:"4A Amber",8:"4B Dim Amber",9:"5A Yellow",10:"5B Dim Yellow",11:"6A Lime",12:"6B Dim Lime",13:"7A Green",14:"7B Dim Green",15:"8A Teal",16:"8B Dim Teal",17:"9A Blue",18:"9B Dim Blue",19:"10A Lavender",20:"10B Dim Lavender",21:"11A Purple",22:"11B Dim Purple",23:"12A White",24:"12B Dim White"},Re={0:"#000000",1:"#FFC0CB",2:"rgba(255, 192, 203, 0.5)",3:"#FF0000",4:"rgba(255, 0, 0, 0.5)",5:"#FF8C00",6:"rgba(255, 140, 0, 0.5)",7:"#FFBF00",8:"rgba(255, 191, 0, 0.5)",9:"#FFFF00",10:"rgba(255, 255, 0, 0.5)",11:"#00FF00",12:"rgba(0, 255, 0, 0.5)",13:"#008000",14:"rgba(0, 128, 0, 0.5)",15:"#008080",16:"rgba(0, 128, 128, 0.5)",17:"#0000FF",18:"rgba(0, 0, 255, 0.5)",19:"#E6E6FA",20:"rgba(230, 230, 250, 0.5)",21:"#800080",22:"rgba(128, 0, 128, 0.5)",23:"#FFFFFF",24:"#FFFFFF"},ke=96,Se=(A={},Object(N.a)(A,0,"All steps in one shot"),Object(N.a)(A,2,"External Step Select"),Object(N.a)(A,1,"Sequence"),A),Ie=(F={},Object(N.a)(F,0,"All"),Object(N.a)(F,2,"ESS"),Object(N.a)(F,1,"Seq"),a(18)),Me=a(24),Ae=function(e,t,a){for(var n="",r=a||"0",c=(t||2)-e.length;n.length<c;)n+=r;return n+e},Fe=function(e){return null===e||void 0===e?"":Ae(e.toString(16),2)},_e=function(e){return null===e||void 0===e?"":Array.from(e).map(function(e){return Fe(e)}).join(" ")},Te=function(e,t){var a=t?e.replace(t,""):e;if(a.length%2>0)return null;if(0===a.length)return null;for(var n=new Uint8Array(a.length/2),r=0;r<a.length/2;r++)n[r]=parseInt(a.substr(2*r,2),16);return n},Be=4536,Le=240,Ue=247,Ge="controls",We=4,Ze=5,He=6,Ve=7,Ye=8;function Xe(e){return e&&"object"===typeof e&&!Array.isArray(e)}function ze(e){for(var t=arguments.length,a=new Array(t>1?t-1:0),n=1;n<t;n++)a[n-1]=arguments[n];if(!a.length)return e;var r=a.shift();if(Xe(e)&&Xe(r))for(var c in r)Xe(r[c])?(e[c]||Object.assign(e,Object(N.a)({},c,{})),ze(e[c],r[c])):Object.assign(e,Object(N.a)({},c,r[c]));return ze.apply(void 0,[e].concat(a))}function Ke(e){return null===e||void 0===e||0===e.length?128:(128-Uint8Array.from(e).reduce(function(e,t){return e+t})%128)%128}function qe(e){return e[0]===Le&&e[e.byteLength-1]===Ue}function Je(e){var t,a={},n=e[We],r=e[Ze],c=e[He],l=e[Ve];switch(n){case L:case U:break;default:return console.warn("parseSysexMessage: invalid command (".concat(Fe(n),")")),null}if(!(r in Z))return console.warn("parseSysexMessage: invalid target",Fe(r),r,Z),null;if(a[r]={},a[r][c]={},7===e.length)return a;if(!(l in de))return null;if(l===Y)t="name";else if(l>=X&&l<=$||l>=Q&&l<=le||l>=se&&l<=oe)t="control";else if(l===ie)t="midi";else{if(l!==ue)return console.warn("parseSysexMessage: invalid obj",l),null;t="all"}if("name"===t&&(a[r][c].name=function(e){var t=e[1];return String.fromCharCode.apply(null,e.slice(2,2+t))}(e.slice(Ye))),"control"===t)if(a[r][c][Ge]=Object(N.a)({},l,{steps:{}}),e.length>9){var s=e[Ye];if(s>=1&&s<=36)if(e.length>Ye+22){var o=function(e){return{index:(e[0]-1)/6+1,config:{channel:e[2],msg_type:e[6],data:[e[10],e[14],e[18]],active:e[22]}}}(e.slice(Ye,Ye+23));a[r][c][Ge][l].steps[o.index]=o.config}else console.warn("parseSysexMessage: data does not contains steps. data.length=".concat(e.length),_e(e));else if(s===ke){var i=function(e){return{control_mode:e[2]}}(e.slice(Ye,e.length-1));a[r][c][Ge][l]=ze(a[r][c][Ge][l],i)}else if(s>=64&&s<=87){var u=function(e){for(var t,a,n,r={steps:{}},c=0;c<e.length;){var l=e[c];switch(0===c&&(n=""+((l-64)/4+1)),n in r.steps||(r.steps[n]={}),l){case 64:case 68:case 72:case 76:case 80:case 84:t=e[++c],c++,a=1===t?e[c]:Array.from(e.slice(c,c+t)),c+=t,r.steps[n].led_midi_ctrl=a;break;case 65:case 69:case 73:case 77:case 81:case 85:t=e[++c],c++,a=1===t?e[c]:Array.from(e.slice(c,c+t)),c+=t,r.steps[n].led_active_color=a;break;case 66:case 70:case 74:case 78:case 82:case 86:t=e[++c],c++,a=1===t?e[c]:Array.from(e.slice(c,c+t)),c+=t,r.steps[n].led_inactive_color=a;break;case 67:case 71:case 75:case 79:case 83:case 87:t=e[++c],c++,a=1===t?e[c]:Array.from(e.slice(c,c+t)),c+=t,r.steps[n].led_num=a;break;case 127:c=e.length;break;default:c++}}return r}(e.slice(Ye,e.length-1));a[r][c][Ge][l]=ze(a[r][c][Ge][l],u)}else if(127!==s)return console.warn("parseSysexMessage: unknown element: ".concat(Fe(s))),null}else a[r][c][Ge]=Object(N.a)({},l,{});if("midi"===t){a[r][c].midi={};var d=e[Ye];if(!(d>=1&&d<=96))return console.warn("parseSysexMessage: unknown element: ".concat(Fe(d))),null;if(e.length>Ye+19){var m=function(e){return{index:(e[0]-1)/6+1,config:{channel:e[2],msg_type:e[6],data:[e[10],e[14],e[18]]}}}(e.slice(Ye,Ye+20));a[r][c].midi[m.index]=m.config}else console.warn("parseSysexMessage: data does not contains steps. data.length=".concat(e.length),_e(e))}return"all"===t&&(a[r][c].all={}),a}function $e(e){if(null===e)return null;for(var t={},a=0;!((a=e.indexOf(Le,a))<0);){a++;var n=e.indexOf(Ue,a),r=Array.from(e.slice(a,a+3)).map(function(e){return Fe(e)}).join(" ");if(r!==Me.NEKTAR_TECHNOLOGY_INC)return console.log("parseSysexDump: file does not contain a Nektar Pacer patch",a,n,r,"-",_e(e)),null;if(127!==e[a+3])return console.warn("parseSysexDump: invalid byte after manufacturer id: ".concat(e[a+1+3])),null;var c=Je(e.slice(a,n));c&&ze(t,c)}return t}function Qe(e,t){if(null===e)return[];for(var a=[],n=0;!((n=e.indexOf(Le,n))<0);){n++;var r=e.indexOf(Ue,n),c=Array.from(e.slice(n,n+3)).map(function(e){return Fe(e)}).join(" ");if(c!==Me.NEKTAR_TECHNOLOGY_INC)return console.log("parseSysexDump: dump does not contain a Nektar Pacer patch",n,r,c,"-",_e(e)),null;if(127!==e[n+3])return console.warn("parseSysexDump: invalid byte after manufacturer id: ".concat(e[n+1+3])),null;a.push(e.slice(n+3,r))}return a}function et(){var e=[U,G,ue],t=Ke(e);return e.push(t),B.concat(e)}function tt(e){var t=[U,G,e,ue],a=Ke(t);return t.push(a),B.concat(t)}function at(e,t){var a=[U,G,e,t],n=Ke(a);return a.push(n),B.concat(a)}function nt(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return[].concat(Object(Ie.a)(function(e,t,a){if(!(arguments.length>3&&void 0!==arguments[3]&&arguments[3])&&!a.control_mode_changed)return[];var n=[L,G,e,t,ke,1,a.control_mode];return n.push(Ke(n)),[B.concat(n)]}(e,t,a[G][e][Ge][t],n)),Object(Ie.a)(function(e,t,a){for(var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=[],c=0,l=Object.keys(a);c<l.length;c++){var s=l[c],o=a[s];if(n||o.changed){var i=[L,G,e,t];i.push(6*(s-1)+1,1,o.channel,0),i.push(6*(s-1)+2,1,o.msg_type,0),i.push(6*(s-1)+3,1,o.data[0],0),i.push(6*(s-1)+4,1,o.data[1],0),i.push(6*(s-1)+5,1,o.data[2],0),i.push(6*(s-1)+6,1,o.active),i.push(Ke(i)),r.push(B.concat(i))}}return r}(e,t,a[G][e][Ge][t].steps,n)),Object(Ie.a)(function(e,t,a){for(var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=[],c=0,l=Object.keys(a);c<l.length;c++){var s=l[c],o=a[s];if(n||o.led_changed){var i=[L,G,e,t];i.push(4*(s-1)+64,1,o.led_midi_ctrl,0),i.push(4*(s-1)+65,1,o.led_active_color,0),i.push(4*(s-1)+66,1,o.led_inactive_color,0),i.push(4*(s-1)+67,1,o.led_num),i.push(Ke(i)),r.push(B.concat(i))}}return r}(e,t,a[G][e][Ge][t].steps,n)))}function rt(e,t){return function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=[],r=0,c=Object.keys(t);r<c.length;r++){var l=c[r],s=t[l];if(s.changed||a){var o=[L,G,e,ie];o.push(6*(l-1)+1,1,s.channel,0),o.push(6*(l-1)+2,1,s.msg_type,0),o.push(6*(l-1)+3,1,s.data[0],0),o.push(6*(l-1)+4,1,s.data[1],0),o.push(6*(l-1)+5,1,s.data[2],0),o.push(6*(l-1)+6,1,s.active),o.push(Ke(o)),n.push(B.concat(o))}}return n}(e,t[G][e].midi)}function ct(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return lt(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return lt(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,c=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw c}}}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}var st=function(){function e(){var t=this;Object(i.a)(this,e),this.toggleForceReread=function(){t.forceReread=!t.forceReread},this.sendSysex=function(e){var a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(t.midi.output){var n=j(t.midi.output);n?a&&n.sendSysex(T,e):console.warn("send: output ".concat(t.midi.output," not found"))}else console.warn("no output enabled to send the message")},this.readPacer=function(e,a){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Please wait...";t.showBusy({busy:!0,busyMessage:n,bytesReceived:0,bytesExpected:a}),t.saveBytes=!1,t.sendSysex(e)},this.readFullDump=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Please wait...";t.showBusy({busy:!0,busyMessage:e,bytesReceived:0,bytesExpected:Be}),t.clearBytes(),t.sendSysex(et())},this.sendDump=Object(E.a)(v.a.mark(function e(){var a,n,r,c,l,s;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.midi.output){e.next=3;break}return console.warn("sendPatch: no output enabled to send the message"),e.abrupt("return");case 3:return t.sendProgress="building sysex messages...",e.next=6,C(20);case 6:a=Qe(Array.from(t.getBytesPresetsAsBlob())),n=0,r=a.length,c=ct(a),e.prev=10,c.s();case 12:if((l=c.n()).done){e.next=21;break}return s=l.value,n++,t.sendProgress="sending message ".concat(n," of ").concat(r," (").concat(Math.round(100*n/r),"%)"),t.sendSysex(s),e.next=19,C(10);case 19:e.next=12;break;case 21:e.next=26;break;case 23:e.prev=23,e.t0=e.catch(10),c.e(e.t0);case 26:return e.prev=26,c.f(),e.finish(26);case 29:setTimeout(function(){return t.sendProgress=null},2e3);case 30:case"end":return e.stop()}},e,null,[[10,23,26,29]])})),this.data=null,this.bytesPresets=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this.bytesGlobal=[],this.sendProgress=null,this.currentPresetIndex="",this.currentControl="",this.updateMessages={},this.midi={inputs:[],outputs:[],input:0,output:0},this.busy=!1,this.busyMessage="Receiving data, please wait...",this.bytesExpected=-1,this.progress=-1,this.decBase=!0,this.extControls=!0,this.forceReread=!1,this.changed=!1,this.D6InfoVisible=!1,this.D6InfoHidden=!1}return Object(u.a)(e,[{key:"clearBytes",value:function(){this.bytesPresets=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],this.bytesGlobal=[]}},{key:"clear",value:function(){console.log("state: clear data"),this.data=null,this.clearBytes(),this.updateMessages={}}},{key:"showD6Info",value:function(){this.D6InfoHidden||(this.D6InfoVisible=!0),console.log("showD6Info()",this.D6InfoVisible)}},{key:"hideD6Info",value:function(){this.D6InfoVisible=!1,this.D6InfoHidden=!0}},{key:"onBusy",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.busy,a=void 0!==t&&t,n=e.busyMessage,r=void 0===n?null:n,c=e.bytesExpected,l=void 0===c?-1:c,s=e.bytesReceived,o=void 0===s?-1:s,i=a!==this.busy;i=(i=i||null!==r&&r!==this.busyMessage)||l>0&&l!==this.bytesExpected;var u=-1;this.bytesExpected>0&&o>0&&(u=5*Math.round(o/this.bytesExpected*100/5),i=i||u>=0&&u!==this.progress),i&&(this.busy!==a&&(this.busy=a),null!==r&&(this.busyMessage=r),l>0&&l!==this.bytesExpected&&(this.bytesExpected=l),!1===a?(this.bytesExpected=-1,this.progress=-1):(l>0&&(this.bytesExpected=l),this.progress!==u&&(this.progress=u)))}},{key:"showBusy",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(t.busy,t.busyMessage),n=void 0===a?null:a,r=t.bytesExpected,c=void 0===r?-1:r,l=t.bytesReceived,s=void 0===l?-1:l;setTimeout(function(){return e.onBusy({busy:!1})},2e4),this.onBusy({busy:!0,busyMessage:n,bytesExpected:c,bytesReceived:s})}},{key:"hideBusy",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t<1?this.onBusy({busy:!1}):setTimeout(function(){return e.onBusy({busy:!1})},t)}},{key:"selectPreset",value:function(e){this.currentPresetIndex=e}},{key:"selectControl",value:function(e){this.currentControl=e}},{key:"setControlMode",value:function(e){this.data[G][this.currentPresetIndex][Ge][this.currentControl].control_mode=e,this.data[G][this.currentPresetIndex][Ge][this.currentControl].control_mode_changed=!0,this.addControlUpdateMessage(this.currentControl,nt(this.currentPresetIndex,this.currentControl,this.data)),this.changed=!0}},{key:"addControlUpdateMessage",value:function(e,t){this.updateMessages.hasOwnProperty(this.currentPresetIndex)||(this.updateMessages[this.currentPresetIndex]={}),this.updateMessages[this.currentPresetIndex].hasOwnProperty(Ge)||(this.updateMessages[this.currentPresetIndex][Ge]={}),this.updateMessages[this.currentPresetIndex][Ge][e]=t}},{key:"updatePresetName",value:function(e,t){void 0!==t&&null!==t&&(t.length>5?console.warn("Presets.updateName: name too long: ".concat(t)):(this.data[G][e].name=t,this.data[G][e].changed=!0,this.updateMessages.hasOwnProperty(e)||(this.updateMessages[e]={}),this.updateMessages[e].hasOwnProperty("name")||(this.updateMessages[e].name={}),this.updateMessages[e].name.dummy=function(e,t){var a=[L,G,e,Y,0],n=t[G][e].name;a.push(n.length);for(var r=0;r<n.length;r++)a.push(n.charCodeAt(r));return a.push(Ke(a)),[B.concat(a)]}(e,this.data),this.changed=!0))}},{key:"updateControlStepMessageType",value:function(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.currentPresetIndex,r=parseInt(a,10);this.data[G][n][Ge][e].steps[t].msg_type=r,this.data[G][n][Ge][e].steps[t].active=r===Ee?0:1,this.data[G][n][Ge][e].steps[t].changed=!0,this.addControlUpdateMessage(e,nt(n,e,this.data)),this.changed=!0}},{key:"updateControlStep",value:function(e,t,a,n,r){var c=arguments.length>5&&void 0!==arguments[5]?arguments[5]:this.currentPresetIndex;console.log("updateControlStep(".concat(e,", ").concat(t,", ").concat(a,", ").concat(n,", ").concat(r,")"));var l=parseInt(r,10);"data"===a?this.data[G][c][Ge][e].steps[t].data[n]=l:this.data[G][c][Ge][e].steps[t][a]=l,a.startsWith("led_")?this.data[G][c][Ge][e].steps[t].led_changed=!0:this.data[G][c][Ge][e].steps[t].changed=!0,this.addControlUpdateMessage(e,nt(c,e,this.data)),this.changed=!0}},{key:"updateMidiSettings",value:function(e,t,a,n){var r=parseInt(n,10),c=this.currentPresetIndex;"data"===t?this.data[G][c].midi[e].data[a]=r:this.data[G][c].midi[e][t]=r,"msg_type"===t&&(this.data[G][c].midi[e].active=r===Ee?0:1),this.data[G][c].midi[e].changed=!0,this.changed=!0,this.updateMessages.hasOwnProperty(c)||(this.updateMessages[c]={}),this.updateMessages[c].hasOwnProperty("midi")||(this.updateMessages[c].midi={}),this.updateMessages[c].midi.dummy=rt(c,this.data)}},{key:"readPreset",value:function(e){this.midi.output&&this.midi.input&&this.readPacer(tt(e),189)}},{key:"getBytesPresetsAsBlob",value:function(){return new Uint8Array(function e(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a>0?t.reduce(function(t,n){return t.concat("object"===typeof n?e(n,a-1):n)},[]):t.slice()}(this.bytesPresets,100))}},{key:"isBytesPresetEmpty",value:function(){return!this.bytesPresets.some(function(e){return e&&e.length>0})}},{key:"storeBytes",value:function(e){for(var t,a=0;!((a=e.indexOf(Le,a))<0);){a++;var n=e.indexOf(Ue,a),r=e.slice(a-1,n+1),c={isPresetName:(t=r)[Ze+1]===G&&1===t[Ve+1],isPreset:t[Ze+1]===G,isGlobal:t[Ze+1]===W,presetNum:t[He+1]};c&&(c.isPresetName&&(this.bytesPresets[c.presetNum]=[]),c.isPreset?this.bytesPresets[c.presetNum].push(r):c.isGlobal?this.bytesGlobal.push(r):console.warn("storeBytes: unsupported message",r))}}},{key:"readFiles",value:function(){var e=Object(E.a)(v.a.mark(function e(t){var a=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(E.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>204800)){e.next=5;break}console.warn("".concat(t.name,": file too big, ").concat(t.size)),a.hideBusy(),e.next=14;break;case 5:return console.log("readFiles: reading"),a.showBusy({busy:!0,busyMessage:"loading file..."}),e.t0=Uint8Array,e.next=10,new Response(t).arrayBuffer();case 10:e.t1=e.sent,qe(n=new e.t0(e.t1))?(a.data=ze(a.data||{},$e(n)),a.storeBytes(n)):console.log("readFiles: not a sysex file",_e(n.slice(0,5))),a.hideBusy();case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"updatePacer",value:function(){var e=this;this.showBusy({busy:!0,busyMessage:"write Preset..."}),Object.getOwnPropertyNames(this.updateMessages).forEach(function(t){Object.getOwnPropertyNames(e.updateMessages[t]).forEach(function(a){Object.getOwnPropertyNames(e.updateMessages[t][a]).forEach(function(n){e.updateMessages[t][a][n].forEach(function(t){e.sendSysex(t)})})})}),setTimeout(function(){e.changed=!1,e.updateMessages={},e.readPreset(e.currentPresetIndex)},1e3)}},{key:"connected",get:function(){return 0!==this.midi.output&&0!==this.midi.input}}]),e}();Object(b.i)(st,{bytes:b.n,bytesPresets:b.n,bytesGlobal:b.n,sendProgress:b.n,data:b.n,currentPresetIndex:b.n,currentControl:b.n,updateMessages:b.n,midi:b.n,connected:b.f,busy:b.n,busyMessage:b.n,progress:b.n,decBase:b.n,extControls:b.n,forceReread:b.n,changed:b.n,D6InfoVisible:b.n});var ot=new st,it=a(94),ut=a(95),dt=a(96),mt=a(98);a(44);function pt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ft=function(e){Object(d.a)(a,e);var t=pt(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"content home"},l.a.createElement("h1",null,"Requirements"),l.a.createElement("div",{className:"doc"},l.a.createElement("p",null,"This editor requires a browser that support the ",l.a.createElement("a",{href:"http://webaudio.github.io/web-midi-api/",target:"_blank",rel:"noopener noreferrer"},"Web MIDI API"),"."),l.a.createElement("p",null,"Currently, only ",l.a.createElement("span",{className:"strong"},"Chrome")," and ",l.a.createElement("span",{className:"strong"},"Opera")," support this standard. This application will therefore ",l.a.createElement("span",{className:"italic"},"not")," work in Firefox, Safari, IE or Edge."),l.a.createElement("p",null,"This editor does not work on iPad or Android tablet either."),l.a.createElement("p",null,"Ensure your Pacer is running the ",l.a.createElement("a",{href:"https://nektartech.com/updating-firmware-pacer/",target:"_blank",rel:"noopener noreferrer"},"latest firmware v10112"),".")),l.a.createElement("h1",null,"Known issues"),l.a.createElement("div",{className:"doc"},l.a.createElement("p",null,"The preset D6 cannot be read.")),l.a.createElement("h1",null,"Limitations"),l.a.createElement("div",{className:"doc"},l.a.createElement("p",null,"The current version of this editor isn't able to edit the Global configuration of the Pacer. This is planned for a future release."),l.a.createElement("p",null,"This editor is provided as-is, without warranty of any kind, express or implied. If you encounter a bug, please fill a bug report with ",l.a.createElement("a",{href:"https://github.com/francoisgeorgy/pacer-editor/issues/new",target:"_blank",rel:"noopener noreferrer"},"this form"),".")),l.a.createElement("h1",null,"Connecting your Pacer"),l.a.createElement("div",{className:"doc"},l.a.createElement("p",null,"Make sure your Pacer is connected to your computer and switched-on."),l.a.createElement("p",null,"This editor listen on all MIDI ports. A future version may offer the possibility to choose a specific port."),l.a.createElement("p",null,"In case of problem, when either the application or Pacer does not respond or communicate, try to reload the application (refresh the page) or reboot the Pacer."),l.a.createElement("p",null,"You can find info about WebMIDI at ",l.a.createElement("a",{href:"https://studiocode.dev/support/webmidi/",target:"_blank",rel:"noopener noreferrer"},"studiocode.dev/support/webmidi"))),l.a.createElement("h1",null,"Editing presets"),l.a.createElement("div",{className:"doc"},l.a.createElement("p",null,"The preset ",l.a.createElement("span",{className:"strong"},"CUR")," is the ",l.a.createElement("span",{className:"italic fluo"},"current")," preset. When you edit preset ",l.a.createElement("span",{className:"strong"},"CUR")," your changes are immediately applied."),l.a.createElement("p",null,"When you edit any other presets, you edit the ",l.a.createElement("span",{className:"fluo"},"saved")," settings of the preset and your changes will only be applied when you ",l.a.createElement("span",{className:"fluo"},"load")," this preset in the Pacer."),l.a.createElement("p",null,"It is currently not possible to load the preset from this editor."),l.a.createElement("div",null,l.a.createElement("h3",null,"Example 1:"),l.a.createElement("p",null,"The currently loaded preset (CUR) is preset ",l.a.createElement("span",{className:"strong"},"A5"),"."),l.a.createElement("p",null,"You edit the preset ",l.a.createElement("span",{className:"strong"},"A5"),"."),l.a.createElement("p",null,"After you save your modifications, the display will show dots. That means the current preset does not reflect the saved preset anymore. You have to ",l.a.createElement("span",{className:"fluo"},"reload")," the preset to be able to use your updated version:"),l.a.createElement("p",null,"- long-press ",l.a.createElement("span",{className:"strong"},"Preset")," switch, then press switch ",l.a.createElement("span",{className:"strong"},"A"),", then press switch ",l.a.createElement("span",{className:"strong"},"5"),".")),l.a.createElement("div",null,l.a.createElement("h3",null,"Example 1:"),l.a.createElement("p",null,"The currently loaded preset (CUR) is preset ",l.a.createElement("span",{className:"strong"},"A1"),"."),l.a.createElement("p",null,"You edit the preset ",l.a.createElement("span",{className:"strong"},"D3"),"."),l.a.createElement("p",null,"After you save your modifications of preset ",l.a.createElement("span",{className:"strong"},"D3"),", if you want to use it, of course you have to load it:"),l.a.createElement("p",null,"- long-press ",l.a.createElement("span",{className:"strong"},"Preset")," switch, then press switch ",l.a.createElement("span",{className:"strong"},"D"),", then press switch ",l.a.createElement("span",{className:"strong"},"3"),"."))),l.a.createElement("h1",null,"Controls settings"),l.a.createElement("div",{className:"doc"},l.a.createElement("p",null,"Each control (buttons 1-6 & A-D, external FS1-FS4 & EXP1-EXP2) can be configured with up to 6 steps."),l.a.createElement("p",null,"At the most basic level, each step has a ",l.a.createElement("span",{className:"italic fluo"},"type")," value that determines the message or action the step will send or execute, as well as 3 data fields that configure the options and parameters for the step depending on the selected type."),l.a.createElement("table",{className:"doc-controls"},l.a.createElement("thead",null,l.a.createElement("tr",null,l.a.createElement("th",null,l.a.createElement("br",null),"Type"),l.a.createElement("th",null,l.a.createElement("br",null),"Description"),l.a.createElement("th",null,"Data 1",l.a.createElement("br",null),"desc."),l.a.createElement("th",null,"Data 1",l.a.createElement("br",null),"values"),l.a.createElement("th",null,"Data 2",l.a.createElement("br",null),"desc."),l.a.createElement("th",null,"Data 2",l.a.createElement("br",null),"values"),l.a.createElement("th",null,"Data 3",l.a.createElement("br",null),"desc."),l.a.createElement("th",null,"Data 3",l.a.createElement("br",null),"values"))),l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"CC Toggle"),l.a.createElement("td",{className:"ctrl-desc"},"Sends a MIDI CC message that toggles between two values each time the button is pressed"),l.a.createElement("td",null,"MIDI CC"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",{className:"allow-break"},"Value to send on Press 1"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",{className:"allow-break"},"Value to send on Press 2"),l.a.createElement("td",null,"0-127")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"CC Trigger"),l.a.createElement("td",{className:"ctrl-desc"},"Sends a MIDI CC message when the button is pressed"),l.a.createElement("td",null,"MIDI CC"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",{className:"allow-break"},"Value to send when pressing down"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",{className:"allow-break"},"Value to send when releasing"),l.a.createElement("td",null,"0-127")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"CC Step"),l.a.createElement("td",{className:"ctrl-desc"}," ??? "),l.a.createElement("td",null,"MIDI CC"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",null,"Start value"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",null,"End value"),l.a.createElement("td",null,"0-127")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"Note"),l.a.createElement("td",{className:"ctrl-desc"},"Send a note when the button is pressed, stop when released"),l.a.createElement("td",null,"Note"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",null,"Velocity"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"Note Toggle"),l.a.createElement("td",{className:"ctrl-desc"},"Send a note when the button is pressed, stop when pressed again"),l.a.createElement("td",null,"Note"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",null,"Velocity"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"Program & Bank"),l.a.createElement("td",{className:"ctrl-desc"},"Send a MIDI Program Change message when the button is pressed"),l.a.createElement("td",null,"Program"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",null,"Bank LSB"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",null,"Bank MSB"),l.a.createElement("td",null,"0-127")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"Program Step"),l.a.createElement("td",{className:"ctrl-desc"},"Send a MIDI Program Step message ??? "),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--"),l.a.createElement("td",null,"Start"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",null,"End"),l.a.createElement("td",null,"0-127")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"NRPN Coarse"),l.a.createElement("td",{className:"ctrl-desc"},"Send a MIDI Non-Registered Parameter Number Coarse message"),l.a.createElement("td",null,"Value"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",null,"LSB"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",null,"MSB"),l.a.createElement("td",null,"0-127")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"NRPN Fine"),l.a.createElement("td",{className:"ctrl-desc"},"Send a MIDI Non-Registered Parameter Number Fine message"),l.a.createElement("td",null,"Value"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",null,"LSB"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",null,"MSB"),l.a.createElement("td",null,"0-127")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"MIDI Machine Control"),l.a.createElement("td",{className:"ctrl-desc"},"Send a MIDI Machine Control message"),l.a.createElement("td",null,"Device ID"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",null,"Command"),l.a.createElement("td",null,"0-127"),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"Relay Outputs"),l.a.createElement("td",{className:"ctrl-desc"},"Action a Pacer Relay"),l.a.createElement("td",null,"Mode"),l.a.createElement("td",null,"N.O.: 1",l.a.createElement("br",null),"N.C.: 2",l.a.createElement("br",null),"Lat.: 3"),l.a.createElement("td",null,"Relay"),l.a.createElement("td",null,"R1: 0",l.a.createElement("br",null),"R2: 1",l.a.createElement("br",null),"R3: 2",l.a.createElement("br",null),"R4: 3"),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"Preset Select"),l.a.createElement("td",{className:"ctrl-desc"},"Switch to the target Preset"),l.a.createElement("td",null,"Target"),l.a.createElement("td",null,l.a.createElement("span",{className:"no-break"},"(Bank * 6) + Num"),l.a.createElement("br",null),"Bank A=0,",l.a.createElement("br",null),"Bank B=1.."),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--"),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"Preset Inc/Dec"),l.a.createElement("td",{className:"ctrl-desc"},"Switch to the next/previous Preset"),l.a.createElement("td",null,"Direction"),l.a.createElement("td",null,"Increment: ??",l.a.createElement("br",null),"Decrement: ??"),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--"),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"Step Select"),l.a.createElement("td",{className:"ctrl-desc"},"?? Action a specific Step for a Control"),l.a.createElement("td",null,"Control Target"),l.a.createElement("td",null,"?? A-D,",l.a.createElement("br",null),"1-6,",l.a.createElement("br",null),"FS1-4,",l.a.createElement("br",null),"EXP1-2"),l.a.createElement("td",null,"Step"),l.a.createElement("td",null,"?? 1-6 (0-indexed?)"),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"Step Inc/Dec"),l.a.createElement("td",{className:"ctrl-desc"},"?? Action the next/prev Step for a Control"),l.a.createElement("td",null,"Control Target"),l.a.createElement("td",null,"?? A-D,",l.a.createElement("br",null),"1-6,",l.a.createElement("br",null),"FS1-4,",l.a.createElement("br",null),"EXP1-2"),l.a.createElement("td",null,"Direction"),l.a.createElement("td",null,"Increment: ??",l.a.createElement("br",null),"Decrement: ??"),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--")),l.a.createElement("tr",null,l.a.createElement("td",{className:"ctrl-type"},"OFF"),l.a.createElement("td",{className:"ctrl-desc"},"Disable the control, do not action nor send anything"),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--"),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--"),l.a.createElement("td",{className:"italic"},"not used"),l.a.createElement("td",null,"--"))))),l.a.createElement("h1",null,"In case of problem"),l.a.createElement("div",{className:"doc"},l.a.createElement("p",null,"Try the following:"),l.a.createElement("p",null,"- Check the MIDI configuration."),l.a.createElement("p",null,"- Reload the editor (F5 or Cmd-R or Ctrl-R)"),l.a.createElement("p",null,"- Restart the Pacer."),l.a.createElement("p",null,"- Close any other applications that may be connected to the Pacer."),l.a.createElement("p",null,"If you mess up the configuration of your Pacer, do a ",l.a.createElement("span",{className:"fluo"},"Factory Restore"),". See page 21 of the Pacer User Guide for the procedure.")),l.a.createElement("h1",null,"MIDI in your browser"),l.a.createElement("div",{className:"doc"},l.a.createElement("div",null,l.a.createElement("p",null,"You need to allow your browser to use your MIDI device:"),l.a.createElement("img",{src:"help-01.png",alt:""})),l.a.createElement("div",null,l.a.createElement("p",null,"In case you didn't allow the use of MIDI device and want to change that, you can right-click on the URL icon and change the setting:"),l.a.createElement("img",{src:"help-02.png",alt:""}))),l.a.createElement("h1",null,"FAQ"),l.a.createElement("div",{className:"doc"},l.a.createElement("p",null,l.a.createElement("i",null,"To be completed..."))),l.a.createElement("h1",null,"Known issues"),l.a.createElement("div",{className:"doc"},l.a.createElement("p",null,'- The preset D6 cannot be read by sending a "read preset" sysex. You have to dump it from the Pacer.'),l.a.createElement("p",null,"- LED configuration is displayed for external footswitch and expression pedals.")),l.a.createElement("h1",null,"Contribute"),l.a.createElement("div",{className:"doc"},l.a.createElement("p",null,"This editor is an Open Source project. You are welcome to contribute."),l.a.createElement("p",null,"The source-code is hosted by GitHub: ",l.a.createElement("a",{href:"https://github.com/francoisgeorgy/pacer-editor",target:"_blank",rel:"noopener noreferrer"},"pacer-editor")),l.a.createElement("p",null,"To contribute your bug fixes, new features, etc.: 1) fork the project, 2) create a pull-request.")),l.a.createElement("h1",null,"Thanks"),l.a.createElement("div",{className:"doc"},l.a.createElement("p",null,"Thank you to the Nektar support service for having provided precious informations regarding the SysEx data format of the Pacer. This editor would not have been possible without their support.")))}}]),a}(c.Component),ht=(a(46),a(28),a(15)),vt=function(e){var t=parseInt(e);if(0===t)return"current";var a=Math.floor((t-1)/6),n=(t-1)%6+1;return String.fromCharCode(a+65)+n.toString()};function Et(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var bt=function(e){var t=e.settings;return null===t||void 0===t?null:l.a.createElement("div",{className:"dump-control"},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{colSpan:6,className:"name"},"MIDI settings")),Object.keys(t).map(function(e){var a=be[t[e].msg_type];return 67===t[e].msg_type&&(a=a+" "+ht.a(t[e].data[0],!0)+" vel. "+t[e].data[1]),l.a.createElement("tr",{key:e},l.a.createElement("td",null,"settings ",e),l.a.createElement("td",null,"ch. ",Fe(t[e].channel)),l.a.createElement("td",null,"msg ",Fe(t[e].msg_type)),l.a.createElement("td",null,a),l.a.createElement("td",null,_e(t[e].data)),l.a.createElement("td",null,t[e].active?"active":"OFF"))}))))},yt=function(e){var t=e.settings;return null===t?null:l.a.createElement("div",null,l.a.createElement(bt,{settings:t}))},gt=function(e){var t=e.obj,a=e.config;return null===a||void 0===a?null:l.a.createElement("div",{className:"dump-control"},l.a.createElement("table",null,l.a.createElement("tbody",null,l.a.createElement("tr",null,l.a.createElement("td",{colSpan:10,className:"name"},me[t])),l.a.createElement("tr",null,l.a.createElement("th",null,"step"),l.a.createElement("th",null,"ch."),l.a.createElement("th",null,"type"),l.a.createElement("th",null,"data"),l.a.createElement("th",null,"decoded"),l.a.createElement("th",null,"active"),l.a.createElement("th",null,"LED num"),l.a.createElement("th",null,"LED On"),l.a.createElement("th",null,"LED Off"),l.a.createElement("th",null,"LED midi")),Object.keys(a.steps).map(function(e){var n=be[a.steps[e].msg_type];67===a.steps[e].msg_type&&(n=n+" "+ht.a(a.steps[e].data[0],!0)+" vel. "+a.steps[e].data[1]);var r=a.steps[e].led_inactive_color,c=a.steps[e].led_active_color;return l.a.createElement("tr",{key:"".concat(t,".").concat(e)},l.a.createElement("td",null,e),l.a.createElement("td",null,Fe(a.steps[e].channel)),l.a.createElement("td",null,Fe(a.steps[e].msg_type)),l.a.createElement("td",null,_e(a.steps[e].data)),l.a.createElement("td",null,n),l.a.createElement("td",null,a.steps[e].active?"active":"OFF"),l.a.createElement("td",null,Fe(a.steps[e].led_num)),l.a.createElement("td",null,c in xe?xe[c]:Fe(c)),l.a.createElement("td",null,r in xe?xe[r]:Fe(r)),l.a.createElement("td",null,Fe(a.steps[e].led_midi_ctrl)))}),l.a.createElement("tr",null,l.a.createElement("td",{colSpan:10},"control mode: ",Se[a.control_mode])))))},Ot=function(e){var t=e.controls;return null===t||void 0===t?null:l.a.createElement("div",{className:"dump-controls"},Object.keys(t).map(function(e){return l.a.createElement(gt,{key:e,obj:e,config:t[e]})}))},jt=function(e){var t=e.index,a=e.data;return null===a||void 0===a?null:l.a.createElement("div",null,l.a.createElement("h3",null,"Preset ",vt(parseInt(t,10))," (#",t,"): ",a.name),l.a.createElement(Ot,{controls:a.controls}),l.a.createElement(yt,{settings:a.midi}))},Nt=function(e){Object(d.a)(a,e);var t=Et(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.state.data;return e?(console.log("DumpSysex render"),l.a.createElement("div",{className:"dump code"},l.a.createElement("div",null,Object.keys(e[G]).map(function(t){return l.a.createElement(jt,{key:t,index:t,data:e[G][t]})})))):null}}]),a}(c.Component),Ct=Object(f.b)("state")(Object(f.c)(Nt));function wt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}function Dt(e,t){return"number"===typeof t?"0x"+Fe(t):t}function Pt(e){return null===e?null:[Le].concat(Object(Ie.a)(T),Object(Ie.a)(e),[Ue])}var xt=function(e){Object(d.a)(a,e);var t=wt(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={output:null,data:null,messages:[{name:"read current preset",message:tt(0),bytesExpected:189},{name:"read preset A1",message:tt(1),bytesExpected:189},{name:"read stompswitch #1 of preset #5",message:at(5,13),bytesExpected:7},{name:"read all presets (takes some time)",message:et(),bytesExpected:4536}],customMessage:""},e.showBusy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(t.busy,t.busyMessage),n=void 0===a?null:a,r=t.bytesExpected,c=void 0===r?-1:r,l=t.bytesReceived,s=void 0===l?-1:l;setTimeout(function(){return e.props.onBusy({busy:!1})},2e4),e.props.onBusy({busy:!0,busyMessage:n,bytesExpected:c,bytesReceived:s})},e.updateCustomMessage=function(t){var a=(t.target.value.toUpperCase().match(/[0-9A-F ]+/g)||[]).join("");e.setState({customMessage:a})},e.getCustomMessageData=function(){if(e.state.customMessage&&""!==e.state.customMessage){var t=Te(e.state.customMessage,/ /g);if(t){var a=Array.from(t);if(a&&a.length>0)return a.push(Ke(a)),[B].concat(Object(Ie.a)(t))}}return null},e.sendCustomMessage=function(){var t=e.getCustomMessageData();t&&t.length>0&&(e.showBusy({busy:!0,busyMessage:"receiving data...",bytesReceived:0,bytesExpected:-1}),e.sendSysex(t))},e.sendMessage=function(t){e.showBusy({busy:!0,busyMessage:"receiving data...",bytesReceived:0,bytesExpected:t.bytesExpected}),e.props.state.sendSysex(t.message)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this;console.log("Debug render");for(var t=this.state,a=t.messages,n=t.customMessage,r=this.props.state.data,c=Ke(Te(n,/ /g)),s="",o=(n.toUpperCase().match(/[0-9A-F]+/g)||[]).join(""),i=0;i<o.length;i++)i>0&&i%2===0&&(s+=" "),s+=o[i];var u=Pt(this.getCustomMessageData())?JSON.stringify($e(Uint8Array.from(Pt(this.getCustomMessageData()))),Dt,4):"";return l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"content-row-content"},l.a.createElement("div",{className:"debug"},l.a.createElement("pre",null,JSON.stringify(r,null,4)))),l.a.createElement("div",{className:"content-row-content first"},l.a.createElement("h2",null,"Test messages:"),l.a.createElement("div",{className:"content-row-content-content"},a.map(function(t,a){return l.a.createElement("div",{key:a,className:"send-message"},l.a.createElement("button",{onClick:function(){return e.sendMessage(t)}},"send"),l.a.createElement("span",{className:"code light"},_e(T.concat(t.message.slice(0,1)))," "),l.a.createElement("span",{className:"code"},_e(t.message.slice(1,-1))," "),l.a.createElement("span",{className:"code light"}," ",_e(t.message.slice(-1))),l.a.createElement("span",{className:"message-name"}," ",t.name))}))),l.a.createElement("div",{className:"content-row-content"},l.a.createElement("h2",null,"Custom message:"),l.a.createElement("div",{className:"content-row-content-content"},l.a.createElement("div",{className:"send-message"},l.a.createElement("button",{onClick:this.sendCustomMessage,disabled:o.length%2!==0},"send"),l.a.createElement("span",{className:"code light"},_e(T)," ",_e(B)," "),l.a.createElement("input",{type:"text",className:"code",size:"80",value:n,placeholder:"hex digits only",onChange:this.updateCustomMessage}),l.a.createElement("span",{className:"code light"}," ",Fe(c))),l.a.createElement("div",{className:"custom-message code"},l.a.createElement("span",{className:"code light"},_e(T)," ",_e(B))," ",s," ",l.a.createElement("span",{className:"code light"},Fe(c))),l.a.createElement("div",{className:"debug"},u?l.a.createElement("pre",null,u):l.a.createElement("div",null,"Invalid message. Send at your own risk.")))),l.a.createElement("div",{className:"content-row-content"},l.a.createElement("h2",null,"Response:"),l.a.createElement("div",{className:"content-row-content-content"},l.a.createElement("div",{className:"message code"},l.a.createElement(Ct,{data:r})))),l.a.createElement("div",{className:"content-row-content"})))}}]),a}(c.Component),Rt=Object(f.b)("state")(Object(f.c)(xt));a(49);function kt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var St=function(e){var t=e.name,a=e.controlIndex,n=e.selected,r=e.onSelect;return l.a.createElement("div",{className:n?"selector selected":"selector",onClick:function(){return r(a)}},l.a.createElement("div",{className:"name"},t))},It=function(e){Object(d.a)(a,e);var t=kt(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).selectControl=function(t){e.props.state.selectControl(t)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.state.currentControl;return l.a.createElement("div",{className:"controls"},he.map(function(a){return l.a.createElement(St,{key:a,name:de[a],controlIndex:a,selected:a===t,onSelect:e.selectControl})}),ve.map(function(a){return l.a.createElement(St,{key:a,name:de[a],controlIndex:a,selected:a===t,onSelect:e.selectControl})}),l.a.createElement("div",{className:"no-control"},"\xa0"),pe.map(function(a){return l.a.createElement(St,{key:a,name:de[a],controlIndex:a,selected:a===t,onSelect:e.selectControl})}),l.a.createElement("div",{className:"no-control"},"\xa0"),fe.map(function(a){return l.a.createElement(St,{key:a,name:de[a],controlIndex:a,selected:a===t,onSelect:e.selectControl})}))}}]),a}(c.Component),Mt=Object(f.b)("state")(Object(f.c)(It)),At=a(19);a(51);function Ft(e){switch(parseInt(e)){case X:case z:case K:case q:case J:case $:case Q:case ee:case te:case ae:return Ce;case ne:case re:case ce:case le:return we;case se:case oe:return De;default:return[]}}var _t=function(e){var t=e.msgType,a=e.value,n=e.dataIndex,r=e.onChange;if(!Ne[t][n])return"";switch(t){case Ee:return"";case 67:case 68:return 0!==n?l.a.createElement("input",{type:"text",value:a,onChange:function(e){return r(n,e.target.value)}}):l.a.createElement("select",{value:a,onChange:function(e){return r(n,e.target.value)},className:"notes"},Array.from(Array(127).keys()).map(function(e){var t=ht.a(e,!0);return l.a.createElement("option",{key:e,value:e},t," (",e,")")}));case 99:return 0===n?l.a.createElement("select",{value:a,onChange:function(e){return r(n,e.target.value)}},H.map(function(e,t){return e?l.a.createElement("option",{key:t,value:t},e):null})):l.a.createElement("select",{value:a,onChange:function(e){return r(n,e.target.value)}},l.a.createElement("option",{value:1},"1"),l.a.createElement("option",{value:2},"2"),l.a.createElement("option",{value:3},"3"),l.a.createElement("option",{value:4},"4"),l.a.createElement("option",{value:5},"5"),l.a.createElement("option",{value:6},"6"));case 100:return 0===n?l.a.createElement("select",{value:a,onChange:function(e){return r(n,e.target.value)}},H.map(function(e,t){return e?l.a.createElement("option",{key:t,value:t},e):null})):l.a.createElement("input",{type:"text",value:a,onChange:function(e){return r(n,e.target.value)}});case 89:return 0===n?l.a.createElement("select",{value:a,onChange:function(e){return r(n,e.target.value)}},l.a.createElement("option",{value:0},"Auto detect"),l.a.createElement("option",{value:1},"Normally open"),l.a.createElement("option",{value:2},"Normally closed"),l.a.createElement("option",{value:3},"Latching")):l.a.createElement("select",{value:a,onChange:function(e){return r(n,e.target.value)}},l.a.createElement("option",{value:0},"Relay 1"),l.a.createElement("option",{value:1},"Relay 2"),l.a.createElement("option",{value:2},"Relay 3"),l.a.createElement("option",{value:3},"Relay 4"));case 98:case 23:return 0===n?l.a.createElement("select",{value:a,onChange:function(e){return r(n,e.target.value)}},V.map(function(e,t){return l.a.createElement("option",{key:t,value:t},e)})):"";case 0:case 3:case 4:case 1:case 2:case 126:case 71:case 64:case 72:case 69:case 70:case 87:case 88:case 85:case 86:case 18:case 17:case 21:case 22:case 19:case 20:case 16:case 24:case 101:default:return l.a.createElement("input",{type:"text",value:a,onChange:function(e){return r(n,e.target.value)}})}};function Tt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Bt=function(e){var t=e.current_value,a=e.onChange;return l.a.createElement("select",{value:t,onChange:function(e){return a(e.target.value)}},l.a.createElement("option",{value:"0"},"0"),l.a.createElement("option",{value:"1"},"1"))},Lt=function(e){var t=e.current_value,a=e.onChange;return l.a.createElement("select",{value:t,onChange:function(e){return a(e.target.value)}},Object.keys(xe).map(function(e){return l.a.createElement("option",{key:e,value:e},xe[e])}))},Ut=function(e){var t=e.current_value,a=e.onChange;return l.a.createElement("select",{value:t,onChange:function(e){return a(e.target.value)}},l.a.createElement("option",{value:"0"},"default"),l.a.createElement("option",{value:"3"},"top"),l.a.createElement("option",{value:"2"},"middle"),l.a.createElement("option",{value:"1"},"bottom"))},Gt=Object(f.c)(function(e){var t,a,n,r=e.presetIndex,s=e.controlId,o=e.stepIndex,i=e.config,u=function(e,t){ot.updateControlStep(s,o,"data",e,t,r)},d=function(e,t){ot.updateControlStep(s,o,e,null,t,r)};return i.msg_type===Ee?l.a.createElement(c.Fragment,null,l.a.createElement("div",{className:"step-row-header"},"Step ",o,":"),l.a.createElement("div",null,l.a.createElement("select",{value:i.msg_type,onChange:function(e){return ot.updateControlStepMessageType(s,o,e.target.value,r)}},Ft(s).map(function(e){return l.a.createElement("option",{key:e,value:e},ye[e])}))),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)):i.data?(t=l.a.createElement(_t,{msgType:i.msg_type,value:i.data[0],dataIndex:0,onChange:u}),a=l.a.createElement(_t,{msgType:i.msg_type,value:i.data[1],dataIndex:1,onChange:u}),n=l.a.createElement(_t,{msgType:i.msg_type,value:i.data[2],dataIndex:2,onChange:u}),l.a.createElement(c.Fragment,null,l.a.createElement("div",{className:"step-row-header"},"Step ",o,":"),l.a.createElement("div",null,l.a.createElement("select",{value:i.msg_type,onChange:function(e){return ot.updateControlStepMessageType(s,o,e.target.value,r)}},Ft(s).map(function(e){return l.a.createElement("option",{key:e,value:e},ye[e])}))),l.a.createElement("div",null,t,l.a.createElement("div",{className:"data-help"},je[i.msg_type]?je[i.msg_type][0]:"")),l.a.createElement("div",null,a,l.a.createElement("div",{className:"data-help"},je[i.msg_type]?je[i.msg_type][1]:"")),l.a.createElement("div",null,n,l.a.createElement("div",{className:"data-help"},je[i.msg_type]?je[i.msg_type][2]:"")),l.a.createElement("div",null,l.a.createElement("select",{value:i.channel,onChange:function(e){return t=e.target.value,void ot.updateControlStep(s,o,"channel",null,t,r);var t}},Array.from(Array(17).keys()).map(function(e){return l.a.createElement("option",{key:e,value:e},0===e?"global":e)}))),l.a.createElement("div",null,l.a.createElement(Lt,{current_value:i.led_inactive_color,onChange:function(e){return d("led_inactive_color",e)}})),l.a.createElement("div",null,l.a.createElement(Lt,{current_value:i.led_active_color,onChange:function(e){return d("led_active_color",e)}})),l.a.createElement("div",null,l.a.createElement(Ut,{current_value:i.led_num,onChange:function(e){return d("led_num",e)}})),l.a.createElement("div",null,l.a.createElement(Bt,{current_value:i.led_midi_ctrl,onChange:function(e){return d("led_midi_ctrl",e)}})))):null}),Wt=function(e){Object(d.a)(a,e);var t=Tt(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.state.data[G][this.props.presetIndex][Ge][this.props.controlId].steps;return l.a.createElement("div",{className:"steps"},l.a.createElement("div",null),l.a.createElement("div",{className:"step-col-header"},"Type"),l.a.createElement("div",{className:"step-col-header"},"Data 1"),l.a.createElement("div",{className:"step-col-header"},"Data 2"),l.a.createElement("div",{className:"step-col-header"},"Data 3"),l.a.createElement("div",{className:"step-col-header"},"MIDI Ch."),l.a.createElement("div",{className:"step-col-header"},"LED Off"),l.a.createElement("div",{className:"step-col-header"},"LED On"),l.a.createElement("div",{className:"step-col-header"},"LED Num"),l.a.createElement("div",{className:"step-col-header"},"LED MIDI"),Object.keys(t).map(function(a){return l.a.createElement(Gt,{key:a,presetIndex:e.props.presetIndex,controlId:e.props.controlId,stepIndex:a,config:t[a]})}))}}]),a}(c.Component),Zt=Object(f.b)("state")(Object(f.c)(Wt)),Ht=a(14),Vt=(a(55),function(e){return l.a.createElement("div",{className:"control-mode"},l.a.createElement("span",{className:"step-row-header"},"Control mode:"),l.a.createElement("select",{onChange:function(t){return e.onUpdate(t.target.value)},value:e.mode},Object.keys(Se).map(function(e){return l.a.createElement("option",{key:e,value:e},Se[e])})))});function Yt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Xt=function(e){Object(d.a)(a,e);var t=Yt(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onNameUpdate=function(t){e.props.state.updatePresetName(e.props.state.currentPresetIndex,t.target.value.length>5?t.target.value.substr(0,5):t.target.value)},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.state.currentPresetIndex,t=this.props.state.data[G][e].name;return l.a.createElement("div",{className:"preset-name-editor"},l.a.createElement("label",null,"Name:")," ",l.a.createElement("input",{value:t,onChange:this.onNameUpdate,size:8}),"max 5 characters")}}]),a}(c.Component),zt=Object(f.b)("state")(Object(f.c)(Xt));a(57);function Kt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var qt=Object(f.c)(function(e){var t=e.xyId,a=e.presetIndex,n=e.hasData,r=e.name,c=e.onClick,s="selector",o=a===ot.currentPresetIndex;return o&&(s+=" selected"),!o&&n&&(s+=" loaded"),"CURRENT"===t&&r?l.a.createElement("div",{className:s,onClick:function(){return c(a)}},"CUR: ",r):l.a.createElement("div",{className:s,onClick:function(){return c(a)}},l.a.createElement("span",{className:"preset-id"},t)," ",l.a.createElement("span",{className:"preset-name"},r))}),Jt=function(e){Object(d.a)(a,e);var t=Kt(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).selectPreset=function(t){e.props.state.selectPreset(t);var a=e.props.state.data;"24"!==t?!e.props.state.forceReread&&a&&a[G]&&a[G][t]||e.props.state.readPreset(t,"reading Pacer..."):e.props.state.showD6Info()},e}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.state,a=t.data,n=t.currentPresetIndex,r=a&&a[G]&&a[G][0]?a[G][0].name:"";return l.a.createElement("div",null,l.a.createElement("div",{className:"selectors"},l.a.createElement("div",{className:"preset-selectors"},l.a.createElement(qt,{xyId:"CURRENT",presetIndex:"0",name:r,xselected:!!n,onClick:this.selectPreset,key:0}),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",{className:"force-read"},l.a.createElement("label",null,l.a.createElement("input",{type:"checkbox",checked:this.props.state.forceReread,onChange:this.props.state.toggleForceReread}),"Always read from Pacer")),["A","B","C","D"].map(function(t){return l.a.createElement(c.Fragment,{key:t},Array.from(Array(6).keys()).map(function(n){var r,c=t+(n+1),s=(6*((r=c).charCodeAt(0)-65)+parseInt(r[1],10)).toString(),o=a&&a[G]&&a[G][s],i=o?a[G][s].name:"";return l.a.createElement(qt,{xyId:c,presetIndex:s,hasData:o,name:i,key:s,onClick:e.selectPreset})}))}))))}}]),a}(c.Component),$t=Object(f.b)("state")(Object(f.c)(Jt));function Qt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ea=function(e){Object(d.a)(a,e);var t=Qt(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onInputFile=function(e){n.inputOpenFileRef.current.click()},n.onChangeFile=function(e){var t=e.target.files[0];t&&n.props.state.readFiles([t])},n.clearData=function(){n.props.state.clear()},n.inputOpenFileRef=l.a.createRef(),n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.state.data,a=this.props.state.connected,n=this.props.state.connected&&this.props.state.changed;return l.a.createElement("div",{className:"preset-buttons"},a&&l.a.createElement("button",{className:"action-button read",onClick:function(){return e.props.state.readFullDump()},title:"Read all presets from Pacer"},"Read Pacer"),!a&&l.a.createElement("div",null),n&&l.a.createElement("button",{className:"action-button update",onClick:function(){return e.props.state.updatePacer()}},"Update Pacer"),!n&&l.a.createElement("div",null),l.a.createElement("input",{ref:this.inputOpenFileRef,type:"file",style:{display:"none"},onChange:this.onChangeFile}),l.a.createElement("button",{className:"action-button",onClick:this.onInputFile},"Load sysex file"),l.a.createElement("div",null),t&&l.a.createElement("button",{className:"action-button",onClick:this.clearData},"CLEAR ALL"),!t&&l.a.createElement("div",null),l.a.createElement("div",null))}}]),a}(c.Component),ta=Object(f.b)("state")(Object(f.c)(ea)),aa=Object(f.c)(function(){return l.a.createElement("div",{className:"content-row-content first"},l.a.createElement("h2",null,"Presets"),l.a.createElement("div",{className:"row align-bottom"},l.a.createElement("div",null,l.a.createElement("div",{className:"row align-bottom"},l.a.createElement($t,null),l.a.createElement(ta,null)),ot.D6InfoVisible&&l.a.createElement("div",{className:"d6info"},"Due to a a bug in the Pacer firmware, the editor cannot read the preset D6. ",l.a.createElement("br",null),"However, you can ask the Pacer to send the preset. Use the encoder knob to select DUMP",l.a.createElement("br",null),"in the top-level menu and then send either a full dump or only the D6 preset.",l.a.createElement("div",{className:"dismiss",onClick:function(){return ot.hideD6Info()}},"[hide]")))))}),na=Object(f.c)(function(){return ot.updateMessages&&Object.getOwnPropertyNames(ot.updateMessages).length?l.a.createElement("div",{className:"messages-to-send"},l.a.createElement("div",{className:"update-messages-title"},"Updates that will be sent to the Pacer:"),Object.getOwnPropertyNames(ot.updateMessages).map(function(e,t){return Object.getOwnPropertyNames(ot.updateMessages[e]).map(function(t,a){return Object.getOwnPropertyNames(ot.updateMessages[e][t]).map(function(a,n){return function(e,t,a,n){switch(t){case"controls":return l.a.createElement("div",{key:"".concat(e,"-").concat(a,"-ctrl")},"- preset ",vt(e),", control ",me[a]);case"midi":return l.a.createElement("div",{key:"".concat(e,"-").concat(a,"-midi")},"- preset ",vt(e),", midi");case"name":return l.a.createElement("div",{key:"".concat(e,"-").concat(a,"-name")},"- preset ",vt(e),", name");default:return null}}(e,t,a,ot.updateMessages[e][t][a])})})})):null});a(29);function ra(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}Object(At.b)(!1);var ca=function(e){Object(d.a)(a,e);var t=ra(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onDragEnter=function(){n.setState({dropZoneActive:!0})},n.onDragLeave=function(){n.setState({dropZoneActive:!1})},n.onDrop=function(e){n.props.state.changed=!0,n.setState({dropZoneActive:!1},function(){n.props.state.readFiles(e)})},n.updateControlMode=function(e,t){n.props.state.setControlMode(parseInt(t,10))},n.copyPresetFrom=function(e,t){},n.state={dropZoneActive:!1,copyPresetFrom:"-1"},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.state.currentPresetIndex,a=this.props.state.currentControl,n=this.props.state.data,r=w(t)&&n&&G in n&&t in n[G]&&Ge in n[G][t]&&a in n[G][t][Ge]&&"steps"in n[G][t][Ge][a]&&6===Object.keys(n[G][t][Ge][a].steps).length,s="";return n&&G in n&&t in n[G]&&"name"in n[G][t]&&(s=vt(t)+": "+n[G][t].name),l.a.createElement(Ht.a,{disableClick:!0,style:{position:"relative"},onDrop:this.onDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave},this.state.dropZoneActive&&l.a.createElement("div",{style:_},"Drop sysex file..."),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"content"},l.a.createElement(aa,null),n&&n[G][t]&&l.a.createElement("div",{className:"content-row-content"},l.a.createElement("h2",null,"Preset ",s),l.a.createElement(zt,null)),n&&n[G][t]&&l.a.createElement("div",{className:"content-row-content"},l.a.createElement(c.Fragment,null,w(t)&&l.a.createElement(Mt,null),r&&l.a.createElement("h3",null,me[a],":"),r&&l.a.createElement(Vt,{controlId:a,mode:n[G][t][Ge][a].control_mode,onUpdate:function(t){return e.updateControlMode(a,t)}}),r&&l.a.createElement(Zt,{presetIndex:t,controlId:a}),!w(t)&&l.a.createElement("div",{className:"please"},"Select a preset."))),this.props.state.changed&&0!==this.props.state.midi.output&&l.a.createElement("div",{className:"content-row-content"},l.a.createElement("div",{className:"actions"},l.a.createElement("button",{className:"update",onClick:function(){return e.props.state.updatePacer()}},"Update Pacer"))),l.a.createElement("div",{className:"content-row-content"},l.a.createElement(na,null)))))}}]),a}(c.Component),la=Object(f.b)("state")(Object(f.c)(ca));a(60);function sa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var oa=function(e){Object(d.a)(a,e);var t=sa(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"monitor-link"},"Please use the new MIDI monitor available at ",l.a.createElement("a",{href:"https://studiocode.dev/midi-monitor/",target:"_blank",rel:"noopener noreferrer"},"https://studiocode.dev/midi-monitor/")))}}]),a}(c.Component),ia=(a(62),function(){return l.a.createElement("div",{className:"footer"},l.a.createElement("div",null,l.a.createElement("p",null,"This web site is not endorsed by, directly affiliated with, maintained, or sponsored by Nektar Technology.")))});a(64);var ua=function(e,t,a){var n,r=[];return function(){clearTimeout(n);var c=arguments[0];c.data[0]===Le?(r.push(c.data),t(r.length),n=setTimeout(function(){console.log("batchMessages: timeout elapsed"),n=null,e(r),r=[]},a)):console.log("non sysex message ignored")}};a(66);function da(e,t){var a;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(a=function(e,t){if(!e)return;if("string"===typeof e)return ma(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ma(e,t)}(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var c,l=!0,s=!1;return{s:function(){a=e[Symbol.iterator]()},n:function(){var e=a.next();return l=e.done,e},e:function(e){s=!0,c=e},f:function(){try{l||null==a.return||a.return()}finally{if(s)throw c}}}}function ma(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function pa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var fa=function(e){Object(d.a)(a,e);var t=pa(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleMidiInputEvent=ua(function(t){var a,n=e.props.state.data,r=da(t);try{for(r.s();!(a=r.n()).done;){var c=a.value;qe(c)?(n=ze(n||{},$e(c)),e.props.state.storeBytes(c)):console.log("MIDI message is not a sysex message",_e(c))}}catch(l){r.e(l)}finally{r.f()}console.log("handleMidiInputEvent: ".concat(t.length," messages merged")),e.props.state.data=n,e.props.state.onBusy({busy:!1})},function(t){e.props.state.onBusy({busy:!0,bytesReceived:t})},1e3),e.connectInput=function(t){t&&(t.hasListener("sysex","all",e.handleMidiInputEvent)?console.log("Midi.connectInput: sysex messages on all channels listener already connected"):(console.log("Midi.connectInput: add listener for sysex messages on all channels"),t.addListener("sysex","all",e.handleMidiInputEvent),console.log("connectInput: ",t.name)))},e.disconnectInput=function(e){e&&(e.removeListener&&e.removeListener(),console.log("disconnectInput: input ".concat(e.id," disconnected")))},e.connectOutput=function(e){e&&console.log("connectOutput: output ".concat(e.id," connected"))},e.disconnectOutput=function(){console.log("disconnectOutput: output disconnected")},e.autoConnectInput=function(){if(e.props.autoConnect&&(console.log("Midi.autoConnectInput: autoConnect ".concat(e.props.autoConnect)),!e.props.state.midi.input)){var t,a=da(e.props.state.midi.inputs);try{for(a.s();!(t=a.n()).done;){var n=t.value;if("input"===n.type&&null!=n.name.match(new RegExp(e.props.autoConnect,"i"))){console.log("Midi.autoConnectInput: connect ".concat(n.name)),e.setState({input:n.id}),e.props.state.midi.input=n.id,e.connectInput(n);break}}}catch(r){a.e(r)}finally{a.f()}}},e.autoConnectOutput=function(){if(e.props.autoConnect&&(console.log("Midi.autoConnectOutput: autoConnect ".concat(e.props.autoConnect)),!e.props.state.midi.output)){var t,a=da(e.props.state.midi.outputs);try{for(a.s();!(t=a.n()).done;){var n=t.value;if("output"===n.type&&null!=n.name.match(new RegExp(e.props.autoConnect,"i"))){console.log("Midi.autoConnectOutput: autoConnect: auto-connect ".concat(n.name)),e.props.state.midi.output=n.id,e.connectOutput(n);break}}}catch(r){a.e(r)}finally{a.f()}}},e.registerInputs=function(){e.props.state.midi.inputs=y.inputs.filter(function(t){return null!=t.name.match(new RegExp(e.props.only,"i"))}),e.autoConnectInput()},e.registerOutputs=function(){e.props.state.midi.outputs=y.outputs.filter(function(t){return null!=t.name.match(new RegExp(e.props.only,"i"))}),e.autoConnectOutput()},e.unRegisterInputs=function(){console.log("Midi.unRegisterInputs"),e.disconnectInput(O(e.props.state.midi.input)),e.props.state.midi.input=null,e.props.state.midi.inputs=[]},e.unRegisterOutputs=function(){console.log("Midi.unRegisterOutputs"),e.disconnectOutput(),e.props.state.midi.output=null,e.props.state.midi.outputs=[]},e.handleMidiConnectEvent=function(t){"disconnected"===t.type&&(e.disconnectInput(t.port.id),e.disconnectOutput()),t.port.name.match(new RegExp(e.props.only,"i"))?("input"===t.port.type&&e.registerInputs(),"output"===t.port.type&&e.registerOutputs()):console.log("Midi.handleMidiConnectEvent: port ignored: ".concat(t.port.name))},e.selectInputPort=function(t){e.props.state.midi.input&&e.disconnectInput(O(e.props.state.midi.input));var a=O(t.target.value);a?(e.props.state.midi.input=a.id,e.connectInput(a)):console.warn("selectInputPort: port not found",t.target.value)},e.selectOutputPort=function(t){e.props.state.midi.output&&e.disconnectOutput(O(e.props.state.midi.output));var a=O(t.target.value);a?(e.props.state.midi.output=a.id,e.connectOutput(a)):console.warn("selectOutputPort: port not found",t.target.value)},e.midiOn=function(t){t?console.warn("Midi.midiOn: WebMidi could not be enabled.",t):(console.log("Midi.midiOn: WebMidi enabled"),y.addListener("connected",e.handleMidiConnectEvent),y.addListener("disconnected",e.handleMidiConnectEvent))},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){console.log("Midi: component did mount: WebMidi.enabled=".concat(y.enabled)),y.enabled?(console.log("Midi: component did mount: already enabled, register ports"),this.registerInputs(),this.registerOutputs()):y.enable(this.midiOn,!0)}},{key:"componentWillUnmount",value:function(){console.log("Midi: component will unmount: unregister ports"),this.unRegisterInputs(),this.unRegisterOutputs()}},{key:"render",value:function(){return l.a.createElement("div",{className:"midi-ports"},l.a.createElement("div",{className:"midi-port-label"},"MIDI input:"),l.a.createElement("select",{value:this.props.state.midi.input,onChange:this.selectInputPort},l.a.createElement("option",{value:0},"- select -"),this.props.state.midi.inputs.map(function(e,t){return l.a.createElement("option",{key:e.id,value:e.id},e.name)})),l.a.createElement("div",{className:"midi-port-label"},"MIDI output:"),l.a.createElement("select",{value:this.props.state.midi.output,onChange:this.selectOutputPort},l.a.createElement("option",{value:0},"- select -"),this.props.state.midi.outputs.map(function(e,t){return l.a.createElement("option",{key:e.id,value:e.id},e.name)})))}}]),a}(c.Component),ha=Object(f.b)("state")(Object(f.c)(fa)),va=a(25),Ea=a.n(va),ba=function(e){var t=e.groupedPorts,a=e.clickHandler;return l.a.createElement("div",{className:"ports-grid"},Object.keys(t).map(function(e,n){return l.a.createElement("div",{className:"port",key:n},l.a.createElement("div",{className:"port-name"},e),t[e].input&&l.a.createElement("div",{className:"port-switch"},l.a.createElement(c.Fragment,null,"in\xa0",l.a.createElement(Ea.a,{onChange:function(){return a(t[e].input.id)},checked:t[e].input.selected,className:"react-switch",id:"switch-".concat(t[e].input.id),height:16,width:36}))),t[e].output&&l.a.createElement("div",{className:"port-switch"},l.a.createElement(c.Fragment,null,"out\xa0",l.a.createElement(Ea.a,{onChange:function(){return a(t[e].output.id)},checked:t[e].output.selected,className:"react-switch",id:"switch-".concat(t[e].output.id),height:16,width:36}))))}))};function ya(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ga=function(e){Object(d.a)(a,e);var t=ya(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={data:null},e.showBusy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=(t.busy,t.busyMessage),n=void 0===a?null:a,r=t.bytesExpected,c=void 0===r?-1:r,l=t.bytesReceived,s=void 0===l?-1:l;setTimeout(function(){return e.props.onBusy({busy:!1})},2e4),e.props.onBusy({busy:!0,busyMessage:n,bytesExpected:c,bytesReceived:s})},e.hideBusy=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;t<1?e.props.onBusy({busy:!1}):setTimeout(function(){return e.props.onBusy({busy:!1})},t)},e.onDragEnter=function(){e.setState({dropZoneActive:!0})},e.onDragLeave=function(){e.setState({dropZoneActive:!1})},e.onDrop=function(t){e.setState({dropZoneActive:!1},function(){e.readFiles(t)})},e.handleMidiInputEvent=function(t){qe(t.data)?e.setState(Object(At.a)(function(e){e.data=ze(e.data||{},$e(t.data))})):console.log("MIDI message is not a sysex message")},e}return Object(u.a)(a,[{key:"readFiles",value:function(){var e=Object(E.a)(v.a.mark(function e(t){var a=this;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(t.map(function(){var e=Object(E.a)(v.a.mark(function e(t){var n;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.size>5242880)){e.next=5;break}console.warn("".concat(t.name,": file too big, ").concat(t.size)),a.hideBusy(),e.next=13;break;case 5:return a.showBusy({busy:!0,busyMessage:"loading file..."}),e.t0=Uint8Array,e.next=9,new Response(t).arrayBuffer();case 9:e.t1=e.sent,qe(n=new e.t0(e.t1))?a.setState(Object(At.a)(function(e){e.data=ze(e.data||{},$e(n))})):console.log("readFiles: not a sysfile",_e(n.slice(0,5))),a.hideBusy();case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.data,a=e.dropZoneActive;return l.a.createElement(Ht.a,{disableClick:!0,style:{position:"relative"},onDrop:this.onDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave},a&&l.a.createElement("div",{style:_},"Drop sysex file..."),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"subheader"},l.a.createElement(ha,{only:".*",autoConnect:"Pacer.*",portsRenderer:function(e,t){return l.a.createElement(ba,{groupedPorts:e,clickHandler:t})},messageType:"sysex",onMidiInputEvent:this.handleMidiInputEvent},l.a.createElement("div",{className:"no-midi"},"Please connect your Pacer to your computer."))),l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"instructions"},l.a.createElement("div",{className:"instruction"},"Send a dump from your Pacer or",l.a.createElement("br",null),"drag & drop a patch file here.")),l.a.createElement("div",{className:"content-row-content first"},l.a.createElement(Ct,{data:t})))))}}]),a}(c.Component);a(69);function Oa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ja=function(e){var t=e.note,a=e.onChange;return l.a.createElement("select",{onChange:function(e){return a(e.target.value)},value:t},Array.from(Array(127).keys()).map(function(e){var t=ht.a(e,!0);return l.a.createElement("option",{key:e,value:e},t)}))},Na=Object(f.c)(function(e){var t,a,n,r=e.index,s=e.config;return s.msg_type===Ee?l.a.createElement(c.Fragment,null,l.a.createElement("div",{className:"setting-row-header"},"message ",r,":"),l.a.createElement("div",null,l.a.createElement("select",{onChange:function(e){return ot.updateMidiSettings(r,"msg_type",null,e.target.value)},value:s.msg_type},ge.map(function(e){return l.a.createElement("option",{key:e.key,value:e.key},e.value)}))),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null),l.a.createElement("div",null)):s.data?(67===s.msg_type?(t=l.a.createElement(ja,{note:s.data[0],onChange:function(e){return ot.updateMidiSettings(r,"data",0,e)}}),a=l.a.createElement("input",{type:"text",value:s.data[1],onChange:function(e){return ot.updateMidiSettings(r,"data",1,e.target.value)}}),n=""):(t=l.a.createElement("input",{type:"text",value:s.data[0],onChange:function(e){return ot.updateMidiSettings(r,"data",0,e.target.value)}}),a=l.a.createElement("input",{type:"text",value:s.data[1],onChange:function(e){return ot.updateMidiSettings(r,"data",1,e.target.value)}}),n=l.a.createElement("input",{type:"text",value:s.data[2],onChange:function(e){return ot.updateMidiSettings(r,"data",2,e.target.value)}})),l.a.createElement(c.Fragment,null,l.a.createElement("div",{className:"setting-row-header"},"Setting ",r,":"),l.a.createElement("div",null,l.a.createElement("select",{onChange:function(e){return ot.updateMidiSettings(r,"msg_type",null,e.target.value)},value:s.msg_type},ge.map(function(e){return l.a.createElement("option",{key:e.key,value:e.key},e.value)}))),l.a.createElement("div",null,t,l.a.createElement("div",{className:"data-help"},je[s.msg_type][0])),l.a.createElement("div",null,a,l.a.createElement("div",{className:"data-help"},je[s.msg_type][1])),l.a.createElement("div",null,n,l.a.createElement("div",{className:"data-help"},je[s.msg_type][2])),l.a.createElement("div",null,l.a.createElement("select",{onChange:function(e){return ot.updateMidiSettings(r,"channel",null,e.target.value)},value:s.channel},Array.from(Array(17).keys()).map(function(e){return l.a.createElement("option",{key:e,value:e},0===e?"global":e)}))))):null}),Ca=function(e){Object(d.a)(a,e);var t=Oa(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.state.data[G][this.props.state.currentPresetIndex].midi;return l.a.createElement("div",{className:"settings"},l.a.createElement("div",null),l.a.createElement("div",{className:"setting-col-header"},"Type"),l.a.createElement("div",{className:"setting-col-header"},"Data 1"),l.a.createElement("div",{className:"setting-col-header"},"Data 2"),l.a.createElement("div",{className:"setting-col-header"},"Data 3"),l.a.createElement("div",{className:"setting-col-header"},"MIDI Ch."),Object.keys(e).map(function(t){return l.a.createElement(Na,{key:t,index:t,config:e[t]})}))}}]),a}(c.Component),wa=Object(f.b)("state")(Object(f.c)(Ca));function Da(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Pa=function(e){Object(d.a)(a,e);var t=Da(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onDragEnter=function(){n.setState({dropZoneActive:!0})},n.onDragLeave=function(){n.setState({dropZoneActive:!1})},n.onDrop=function(e){n.props.state.changed=!0,n.setState({dropZoneActive:!1},function(){n.props.state.readFiles(e)})},n.state={dropZoneActive:!1},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props.state.currentPresetIndex,a=this.props.state.data,n=!1;return this.props.state.data&&(n=G in a&&t in a[G]&&"midi"in a[G][t]&&16===Object.keys(a[G][t].midi).length),l.a.createElement(Ht.a,{disableClick:!0,style:{position:"relative"},onDrop:this.onDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave},this.state.dropZoneActive&&l.a.createElement("div",{style:_},"Drop sysex file..."),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"content"},l.a.createElement(aa,null),n&&l.a.createElement("div",{className:"content-row-content"},l.a.createElement("h2",null,"Preset MIDI settings"),l.a.createElement(wa,null)),this.props.state.changed&&0!==this.props.state.midi.output&&l.a.createElement("div",{className:"content-row-content"},l.a.createElement("h2",null,"Send the updated config to the Pacer"),l.a.createElement("div",{className:"actions"},l.a.createElement("button",{className:"update",onClick:function(){return e.props.state.updatePacer()}},"Update Pacer"))),l.a.createElement("div",{className:"content-row-content"},l.a.createElement(na,null)))))}}]),a}(c.Component),xa=Object(f.b)("state")(Object(f.c)(Pa)),Ra=a(97);var ka=Object(f.c)(function(e){var t=e.message,a=e.hexDisplay;if(null===t||void 0===t||t.constructor===Object&&0===Object.keys(t).length)return null;for(var n=t.msg_type,r=je[n],s=t.data,o=[null,null,null],i=0;i<3;i++)r[i]!==Oe&&(o[i]=a?Fe(s[i]):s[i],0===i&&67===n&&(o[i]+=" ("+ht.a(s[i],!0)+")"));var u="";u=a?Fe(t.channel):0===t.channel?"global ch.":"ch. ".concat(t.channel);var d=null,m=null;t.led_active_color&&t.led_inactive_color&&(d=127===t.led_active_color?0:t.led_active_color,m=127===t.led_inactive_color?0:t.led_inactive_color);var p=d>0&&m>0;return l.a.createElement(c.Fragment,null,l.a.createElement("div",{className:"overview-message"},l.a.createElement("div",{className:"overview-message-type"},function(e){if(null===e||void 0===e)return"";var t=e.data;switch(e.msg_type){case 0:return"CC".concat(t[0]," min ").concat(t[1]," max ").concat(t[2]);case 3:return"NRPN C max ".concat(t[0]," ").concat(t[1],": ").concat(t[2]);case 4:return"NRPN F max ".concat(t[0]," ").concat(t[1],":").concat(t[2]);case 1:return"PITCH min ".concat(t[1]," max ").concat(t[2]);case 2:return"AT CHAN min ".concat(t[1]," max ").concat(t[2]);case 126:return"DAW FUNC ".concat(t[0]);case Ee:return"OFF";case 71:return"CC".concat(t[0]," toggle ").concat(t[1]," \u21c4 ").concat(t[2]);case 64:return"CC".concat(t[0]," ").concat("\u21e9").concat(t[1]," ").concat("\u21e7").concat(t[2]);case 72:return"CC".concat(t[0]," step ").concat(t[1]," to ").concat(t[2]);case 67:return"NOTE ".concat(t[0]," vel ").concat(t[1]);case 68:return"NOTE TOGGLE ".concat(t[0]," vel ").concat(t[1]);case 69:return"PRG BANK ".concat(t[0]," ").concat(t[1],":").concat(t[2]);case 70:return"PRG STEP ".concat(t[1]," to ").concat(t[2]);case 87:return"NRPN C ".concat(t[0]," ").concat(t[1],":").concat(t[2]);case 88:return"NRPN F ".concat(t[0]," ").concat(t[1],":").concat(t[2]);case 85:return"MMC ID ".concat(t[0]," cmd ").concat(t[1]);case 89:return"RELAY ".concat(t[1]," ").concat(Pe[t[0]]);case 98:return"PRESET SELECT ".concat(V[t[0]]);case 86:return"PRESET ".concat(t[0]?"DEC":"INC");case 99:return"".concat(H[t[0]]," step ").concat(t[1]);case 100:return"STEP ".concat(t[1]?"DEC":"INC"," '").concat(H[t[0]],"'");case 18:return"MSG_ENC_CC ".concat(t[0]," ").concat(t[1]," ").concat(t[2]);case 17:return"CC REL ".concat(t[0]);case 21:return"NRPN C max ".concat(t[0]," ").concat(t[1],":").concat(t[2]);case 22:return"NRPN F max ".concat(t[0]," ").concat(t[1],":").concat(t[2]);case 19:return"PITCH min ".concat(t[1]," max ").concat(t[2]);case 20:return"AT CHAN min ".concat(t[1]," max ").concat(t[2]);case 16:return"PRG ".concat(t[1]," to ").concat(t[2]);case 23:return"PRESET SEL ".concat(t[1]," to ").concat(t[2]);case 24:return"STEP SELECT '".concat(H[t[0]],"', ").concat(t[1]," to ").concat(t[2]);case 101:return"CC".concat(t[0]," ").concat(t[1]);default:return"?".concat(e.msg_type,"? ").concat(t[0]," ").concat(t[1]," ").concat(t[2])}}(t))),t.msg_type!==Ee&&l.a.createElement("div",{className:"overview-message-ch-colors"},l.a.createElement("div",{className:"msg-midi-channel"},u),p&&l.a.createElement("div",{className:"overview-step-color"},l.a.createElement("div",{className:"color-on",style:{backgroundColor:Re[d]},title:xe[d]}),l.a.createElement("div",{className:"color-off",style:{backgroundColor:Re[m]},title:xe[m]}))))}),Sa=Object(f.c)(function(e){var t=e.step,a=e.hexDisplay;return null===t||void 0===t?null:0===t.active?null:l.a.createElement("div",{className:"overview-step"},l.a.createElement(ka,{message:t,hexDisplay:a}))}),Ia=Object(Ra.a)(Object(f.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.history,a=e.presetIndex,n=e.controlIndex,r=e.control,c=e.hexDisplay,s=e.stompswitch,o=void 0===s||s;if(null===r||void 0===r)return null;if(!r.steps)return null;var i=Object.keys(r.steps).filter(function(e){return r.steps[e].active>0}).length;return l.a.createElement("div",{className:"overview-control ".concat(o?"stompswitch":""),onClick:function(){ot.selectPreset(a),ot.selectControl(n),t.push("/preset")},title:"click to edit"},l.a.createElement("div",{className:"control-header"},l.a.createElement("div",{className:"control-name"},de[n]),i>1&&l.a.createElement("div",null,Se[r.control_mode])),Object.keys(r.steps).map(function(e){return l.a.createElement(Sa,{key:e,step:r.steps[e],hexDisplay:c})}))})),Ma=Object(f.c)(function(e){var t=e.presetIndex,a=e.controls,n=e.hexDisplay,r=e.extControls;if(null===a||void 0===a)return null;var c={presetIndex:t,hexDisplay:n};return l.a.createElement("div",{className:"overview-controls"},r&&he.map(function(e){return l.a.createElement(Ia,Object.assign({key:e,controlIndex:e,control:a[e]},c,{stompswitch:!1}))}),r&&ve.map(function(e){return l.a.createElement(Ia,Object.assign({key:e,controlIndex:e,control:a[e]},c,{stompswitch:!1}))}),l.a.createElement("div",null),pe.map(function(e){return l.a.createElement(Ia,Object.assign({key:e,controlIndex:e,control:a[e]},c))}),l.a.createElement("div",null),fe.map(function(e){return l.a.createElement(Ia,Object.assign({key:e,controlIndex:e,control:a[e]},c))}))}),Aa=Object(f.c)(function(e){var t=e.setting,a=e.hexDisplay;return null===t||void 0===t?null:t.msg_type?t.msg_type===Ee?null:l.a.createElement("div",{className:"overview-midi"},l.a.createElement(ka,{message:t,hexDisplay:a})):null}),Fa=Object(f.c)(function(e){var t=e.settings,a=e.hexDisplay;return null===t||void 0===t?null:l.a.createElement("div",{className:"overview-midi-settings"},l.a.createElement("div",{className:"control-name"},"MIDI"),Object.keys(t).map(function(e){return l.a.createElement(Aa,{key:e,index:e,setting:t[e],hexDisplay:a})}))}),_a=Object(Ra.a)(Object(f.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.history,a=e.presetIndex,n=e.presetName;return l.a.createElement("h3",{onClick:function(){ot.selectPreset(a),ot.selectControl(1),t.push("/preset")},title:"click to edit"},vt(parseInt(a,10)),": ",l.a.createElement("span",{className:"bold"},n))})),Ta=Object(f.c)(function(e){var t=e.index,a=e.data,n=e.hexDisplay,r=e.extControls;return null===a||void 0===a?null:l.a.createElement("div",{className:"overview-preset"},l.a.createElement(_a,{presetIndex:t,presetName:a.name}),l.a.createElement(Ma,{presetIndex:t,controls:a.controls,hexDisplay:n,extControls:r}),function(e){if(e&&e.midi)for(var t in e.midi){var a=e.midi[t];if(a.hasOwnProperty("msg_type")&&a.msg_type!==Ee)return!0}return!1}(a)&&l.a.createElement(Fa,{settings:a.midi,hexDisplay:n}))}),Ba=Object(f.c)(function(e){var t=e.presets,a=e.hexDisplay,n=e.extControls;return null===t||void 0===t?null:l.a.createElement("div",{className:"overview-presets"},Object.keys(t).map(function(e){return l.a.createElement(Ta,{key:e,index:e,data:t[e],hexDisplay:a,extControls:n})}))}),La=Object(f.c)(function(e){var t=e.data,a=e.hexDisplay,n=e.extControls;return null===t||void 0===t?null:l.a.createElement("div",{className:"overview"},l.a.createElement(Ba,{presets:t[G],hexDisplay:a,extControls:n}))});a(72);function Ua(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ga=function(e){Object(d.a)(a,e);var t=Ua(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).loadFactoryDefaults=Object(E.a)(v.a.mark(function t(){var a,n;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("patches/factory-defaults.syx");case 2:return a=t.sent,console.log("loadFactoryDefaults",a),t.t0=Uint8Array,t.next=7,a.arrayBuffer();case 7:t.t1=t.sent,n=new t.t0(t.t1),console.log("loadFactoryDefaults",n),qe(n)&&(console.log("loadFactoryDefaults OK"),e.props.state.data=ze($e(n)),e.props.state.storeBytes(n));case 11:case"end":return t.stop()}},t)})),e}return Object(u.a)(a,[{key:"render",value:function(){return this.props.state.data?null:l.a.createElement("div",{className:"Xpreset-buttons"},l.a.createElement("button",{className:"action-button",onClick:this.loadFactoryDefaults},"Load Factory defaults"))}}]),a}(c.Component),Wa=Object(f.b)("state")(Object(f.c)(Ga));function Za(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ha=function(e){Object(d.a)(a,e);var t=Za(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onDragEnter=function(){n.setState({dropZoneActive:!0})},n.onDragLeave=function(){n.setState({dropZoneActive:!1})},n.onDrop=function(e){n.props.state.changed=!0,n.setState({dropZoneActive:!1},function(){n.props.state.readFiles(e)})},n.state={dropZoneActive:!1},n}return Object(u.a)(a,[{key:"render",value:function(){return l.a.createElement(Ht.a,{disableClick:!0,style:{position:"relative"},onDrop:this.onDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave},this.state.dropZoneActive&&l.a.createElement("div",{style:_},"Drop sysex file..."),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"content"},l.a.createElement(aa,null),l.a.createElement("div",{className:"content-row-content"},l.a.createElement(La,{data:this.props.state.data,hexDisplay:!this.props.state.decBase,extControls:this.props.state.extControls})),l.a.createElement(Wa,null))))}}]),a}(c.Component),Va=Object(f.b)("state")(Object(f.c)(Ha));function Ya(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Xa=function(e){Object(d.a)(a,e);var t=Ya(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this.props.state,t=e.busy,a=e.busyMessage,n=e.progress;return t?l.a.createElement("div",{className:this.props.className||"busy"},this.props.busyMessage?this.props.busyMessage:a,n>=0&&l.a.createElement("span",null," ",n,"%")):null}}]),a}(c.Component),za=Object(f.b)("state")(Object(f.c)(Xa)),Ka=a(33);function qa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var Ja=function(e){Object(d.a)(a,e);var t=qa(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).handleClick=function(t){var a="function"===typeof e.props.data?e.props.data():e.props.data,n=window.URL.createObjectURL(new Blob([a],{type:"application/octet-stream"})),r=e.props.filename;if(e.props.addTimestamp){var c=new Date;r+="."+(c.getUTCFullYear()+"-"+("0"+(c.getUTCMonth()+1)).slice(-2)+"-"+("0"+c.getUTCDate()).slice(-2)+"-"+("0"+c.getUTCHours()).slice(-2)+("0"+c.getUTCMinutes()).slice(-2)+("0"+c.getUTCSeconds()).slice(-2))}var l=document.createElement("a");l.download=r+".syx",l.style.display="none",l.href=n,document.body.appendChild(l),l.click(),document.body.removeChild(l),setTimeout(function(){return window.URL.revokeObjectURL(n)},1e3)},e}return Object(u.a)(a,[{key:"render",value:function(){return this.props.disabled?l.a.createElement("button",{disabled:!0,className:"action-button ".concat(this.props.className)},this.props.label):l.a.createElement("button",{onClick:this.handleClick,className:"action-button ".concat(this.props.className)},this.props.label)}}]),a}(c.Component),$a=Object(f.b)("state")(Object(f.c)(Ja));function Qa(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var en=function(e){Object(d.a)(a,e);var t=Qa(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=this;return this.props.state.isBytesPresetEmpty()?null:l.a.createElement($a,{data:function(){return e.props.state.getBytesPresetsAsBlob()},filename:"pacer-patch",addTimestamp:!0,label:"Save to file"})}}]),a}(c.Component),tn=Object(f.b)("state")(Object(f.c)(en));a(82);function an(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var nn=function(e){Object(d.a)(a,e);var t=an(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).onChangeFile=function(e){var t=e.target.files[0];n.props.state.readFiles([t])},n.onInputFile=function(e){n.inputOpenFileRef.current.click()},n.onDragEnter=function(){n.setState({dropZoneActive:!0})},n.onDragLeave=function(){n.setState({dropZoneActive:!1})},n.onDrop=function(e){n.setState({dropZoneActive:!1},function(){n.props.state.readFiles(e)})},n.sendDump=function(){n.props.state.sendDump()},n.inputOpenFileRef=l.a.createRef(),n.state={dropZoneActive:!1,status:null},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.status,n=t.dropZoneActive,r=(this.props.state.midi.output,this.props.state.data);return l.a.createElement(Ht.a,{disableClick:!0,style:{position:"relative"},onDrop:this.onDrop,onDragEnter:this.onDragEnter,onDragLeave:this.onDragLeave},n&&l.a.createElement("div",{style:_},"Drop sysex file..."),l.a.createElement("div",{className:"wrapper"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"content-row-content first dump-wrapper"},l.a.createElement("h2",null,"Import/Export all presets at once"),l.a.createElement("div",{className:""},l.a.createElement("p",null,"This page allows you to import/export all the Pacer presets at once."),l.a.createElement("p",null,"Please note that, due to a limitation with the current Pacer firmware, the preset D6 cannot be read by this application. A future firmware update should fix this."),l.a.createElement("p",null,"The Global Config is not read or written by this tool. A future update will hopefully fix this.")),l.a.createElement("div",null,l.a.createElement("h3",null,"Pacer \u279c save to file :"),l.a.createElement("button",{className:"action-button read",onClick:function(){return e.props.state.readFullDump()}},"Read Pacer"),l.a.createElement(tn,null),l.a.createElement(za,{className:"space-left inline-busy",busyMessage:"reading pacer:"})),l.a.createElement("div",null,l.a.createElement("h3",null,"Read file \u279c Pacer :"),l.a.createElement("input",{ref:this.inputOpenFileRef,type:"file",style:{display:"none"},onChange:this.onChangeFile}),l.a.createElement("button",{className:"action-button",onClick:this.onInputFile},"Load sysex file"),r&&l.a.createElement("button",{className:"action-button update",onClick:this.sendDump},"Send to Pacer"),this.props.state.sendProgress&&l.a.createElement("span",null,this.props.state.sendProgress)),l.a.createElement("div",null,l.a.createElement("h3",null,"Data included in the dump:"),l.a.createElement("p",null,'Presets marked "no data" are ignored and will not be sent to your Pacer or included in the sysex file.')),l.a.createElement("div",{className:"patch-content"},Array.from(Array(25).keys()).map(function(e){var t=vt(e),a=r&&r[G]&&r[G][e],n=a?r[G][e].name:"";return 0===e?null:l.a.createElement("div",{key:e},l.a.createElement("div",null,t),a?l.a.createElement("div",null,n):l.a.createElement("div",{className:"placeholder"},"no data"))})),a&&l.a.createElement("div",{className:"status ".concat(a.severity)},a.message),r&&l.a.createElement("div",{className:"Xpreset-buttons"},l.a.createElement("button",{onClick:function(){return e.props.state.clear()}},"CLEAR DATA"))))))}}]),a}(c.Component),rn=Object(f.b)("state")(Object(f.c)(nn));a(84),a(86);function cn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var ln=function(e){Object(d.a)(a,e);var t=cn(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={supported:!0},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){navigator.requestMIDIAccess?console.log("MidiSupportWarning: midi supported"):(console.log("MidiSupportWarning: midi not supported"),this.setState({supported:!1}))}},{key:"render",value:function(){return this.state.supported?null:l.a.createElement("div",{className:"midi-support-warning-top"},"This browser does not support MIDI. See ",l.a.createElement("a",{href:"https://webmidi.info/",target:"_blank",rel:"noreferrer noopener"},"webmidi.info")," for a list of browsers that support MIDI.")}}]),a}(c.Component);function sn(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}();return function(){var a,n=Object(p.a)(e);if(t){var r=Object(p.a)(this).constructor;a=Reflect.construct(n,arguments,r)}else a=n.apply(this,arguments);return Object(m.a)(this,a)}}var on=function(e){var t=e.label,a=e.to,n=e.activeOnlyWhenExact;return l.a.createElement(it.a,{path:a,exact:n,children:function(e){var n=e.match;return l.a.createElement("div",{className:n?"header-link active":"header-link"},l.a.createElement(ut.a,{to:a},t))}})},un=function(){return l.a.createElement("div",{className:"content home"},l.a.createElement("div",{className:"error"},"Invalid URL"))},dn=function(e){Object(d.a)(a,e);var t=sn(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){var e=Ka.parse(window.location.search),t=!!e.debug&&"1"===e.debug;return l.a.createElement(f.a,{state:ot},l.a.createElement(dt.a,null,l.a.createElement("div",{className:"app"},l.a.createElement(ln,null),l.a.createElement("header",{className:"header"},l.a.createElement(on,{activeOnlyWhenExact:!0,to:"/",label:"Overview"}),l.a.createElement(on,{to:"/preset",label:"Preset Controls"}),l.a.createElement(on,{to:"/presetmidi",label:"Preset MIDI"}),l.a.createElement(on,{to:"/patch",label:"Import/Export"}),t&&l.a.createElement(on,{to:"/dumpdecoder",label:"Dump decoder"}),t&&l.a.createElement(on,{to:"/debug",label:"Debug"}),l.a.createElement(on,{to:"/help",label:"Help"}),l.a.createElement("div",{className:"spacer"}," "),l.a.createElement("div",{className:"header-app-name"},"Pacer editor by ",l.a.createElement("a",{href:"https://studiocode.dev/",target:"_blank",rel:"noopener noreferrer"},"StudioCode.dev"))),l.a.createElement("div",{className:"subheader row"},l.a.createElement(ha,{only:".*",autoConnect:"Pacer.*"}),l.a.createElement(za,null)),l.a.createElement("div",{className:"main-content-wrapper"},l.a.createElement(mt.a,null,l.a.createElement(it.a,{exact:!0,path:"/",render:function(e){return l.a.createElement(Va,{debug:t})}}),l.a.createElement(it.a,{path:"/preset",render:function(e){return l.a.createElement(la,{debug:t})}}),l.a.createElement(it.a,{path:"/presetmidi",render:function(e){return l.a.createElement(xa,{debug:t})}}),l.a.createElement(it.a,{path:"/patch",render:function(e){return l.a.createElement(rn,{debug:t})}}),l.a.createElement(it.a,{path:"/monitor",render:function(e){return l.a.createElement(oa,{debug:t})}}),t&&l.a.createElement(it.a,{path:"/dumpdecoder",render:function(e){return l.a.createElement(ga,{debug:t})}}),t&&l.a.createElement(it.a,{path:"/debug",render:function(e){return l.a.createElement(Rt,{debug:t})}}),l.a.createElement(it.a,{exact:!0,path:"/help",render:function(e){return l.a.createElement(ft,null)}}),l.a.createElement(it.a,{component:un}))),l.a.createElement(ia,null))))}}]),a}(c.Component);a(88),a(90);function mn(){}console.log=mn,console.warn=mn,console.error=mn,o.a.render(l.a.createElement(dn,null),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL(".",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat(".","/service-worker.js");n?(function(e,t){fetch(e).then(function(a){404===a.status||-1===a.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):r(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):r(t,e)})}}()}},[[35,2,1]]]);